{"version":3,"file":"index.js","sources":["../../src/__internal__/meta.ts","../../src/table-block/config.ts","../../src/__internal__/components/icon.tsx","../../src/table-block/view/utils.ts","../../src/table-block/view/drag.ts","../../src/table-block/view/operation.ts","../../src/table-block/view/pointer.ts","../../src/table-block/view/component.tsx","../../src/table-block/view/view.ts","../../src/table-block/index.ts"],"sourcesContent":["import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\n\nexport function withMeta<T extends MilkdownPlugin>(\n  plugin: T,\n  meta: Partial<Meta> & Pick<Meta, 'displayName'>\n): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/components',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n","import { $ctx } from '@milkdown/utils'\n\nimport { withMeta } from '../__internal__/meta'\n\nexport type RenderType =\n  | 'add_row'\n  | 'add_col'\n  | 'delete_row'\n  | 'delete_col'\n  | 'align_col_left'\n  | 'align_col_center'\n  | 'align_col_right'\n  | 'col_drag_handle'\n  | 'row_drag_handle'\n\nexport interface TableBlockConfig {\n  renderButton: (renderType: RenderType) => string\n}\n\nconst defaultTableBlockConfig: TableBlockConfig = {\n  renderButton: (renderType) => {\n    switch (renderType) {\n      case 'add_row':\n        return '+'\n      case 'add_col':\n        return '+'\n      case 'delete_row':\n        return '-'\n      case 'delete_col':\n        return '-'\n      case 'align_col_left':\n        return 'left'\n      case 'align_col_center':\n        return 'center'\n      case 'align_col_right':\n        return 'right'\n      case 'col_drag_handle':\n        return '='\n      case 'row_drag_handle':\n        return '='\n    }\n  },\n}\n\nexport const tableBlockConfig = $ctx(\n  { ...defaultTableBlockConfig },\n  'tableBlockConfigCtx'\n)\n\nwithMeta(tableBlockConfig, {\n  displayName: 'Config<table-block>',\n  group: 'TableBlock',\n})\n","import clsx from 'clsx'\nimport DOMPurify from 'dompurify'\nimport { h } from 'vue'\n\nh\n\ntype IconProps = {\n  icon?: string | null\n  class?: string\n  onClick?: (event: PointerEvent) => void\n}\n\nexport function Icon({ icon, class: className, onClick }: IconProps) {\n  return (\n    <span\n      class={clsx('milkdown-icon', className)}\n      onPointerdown={onClick}\n      ref={(el) => {\n        if (el && icon) {\n          ;(el as HTMLElement).innerHTML = DOMPurify.sanitize(icon.trim())\n        }\n      }}\n    />\n  )\n}\n\nIcon.props = {\n  icon: {\n    type: String,\n    required: false,\n  },\n  class: {\n    type: String,\n    required: false,\n  },\n  onClick: {\n    type: Function,\n    required: false,\n  },\n}\n","import type { Node } from '@milkdown/prose/model'\nimport type { EditorView } from '@milkdown/prose/view'\nimport type { Ref } from 'vue'\n\nimport { computePosition } from '@floating-ui/dom'\nimport { findTable } from '@milkdown/preset-gfm'\nimport { findParent } from '@milkdown/prose'\nimport { CellSelection } from '@milkdown/prose/tables'\n\nimport type { CellIndex, Refs } from './types'\n\nexport function findNodeIndex(parent: Node, child: Node) {\n  for (let i = 0; i < parent.childCount; i++) {\n    if (parent.child(i) === child) return i\n  }\n  return -1\n}\n\nexport function findPointerIndex(\n  event: PointerEvent,\n  view?: EditorView\n): CellIndex | undefined {\n  if (!view) return\n\n  try {\n    const posAtCoords = view.posAtCoords({\n      left: event.clientX,\n      top: event.clientY,\n    })\n    if (!posAtCoords) return\n    const pos = posAtCoords?.inside\n    if (pos == null || pos < 0) return\n\n    const $pos = view.state.doc.resolve(pos)\n    const node = view.state.doc.nodeAt(pos)\n    if (!node) return\n\n    const cellType = ['table_cell', 'table_header']\n    const rowType = ['table_row', 'table_header_row']\n\n    const cell = cellType.includes(node.type.name)\n      ? node\n      : findParent((node) => cellType.includes(node.type.name))($pos)?.node\n    const row = findParent((node) => rowType.includes(node.type.name))(\n      $pos\n    )?.node\n    const table = findParent((node) => node.type.name === 'table')($pos)?.node\n    if (!cell || !row || !table) return\n\n    const columnIndex = findNodeIndex(row, cell)\n    const rowIndex = findNodeIndex(table, row)\n\n    return [rowIndex, columnIndex]\n  } catch {\n    return undefined\n  }\n}\n\nexport function getRelatedDOM(\n  contentWrapperRef: Ref<HTMLElement | undefined>,\n  [rowIndex, columnIndex]: CellIndex\n) {\n  const content = contentWrapperRef.value\n  if (!content) return\n  const rows = content.querySelectorAll('tr')\n  const row = rows[rowIndex]\n  if (!row) return\n\n  const firstRow = rows[0]\n  if (!firstRow) return\n\n  const headerCol = firstRow.children[columnIndex]\n  if (!headerCol) return\n\n  const col = row.children[columnIndex]\n  if (!col) return\n\n  return {\n    row,\n    col,\n    headerCol,\n  }\n}\n\nexport function recoveryStateBetweenUpdate(\n  refs: Refs,\n  view?: EditorView,\n  node?: Node\n) {\n  if (!node) return\n  if (!view) return\n  const { selection } = view.state\n  if (!(selection instanceof CellSelection)) return\n\n  const { $from } = selection\n  const table = findTable($from)\n  if (!table || table.node !== node) return\n\n  if (selection.isColSelection()) {\n    const { $head } = selection\n    const colIndex = $head.index($head.depth - 1)\n    computeColHandlePositionByIndex({\n      refs,\n      index: [0, colIndex],\n      before: (handleDOM) => {\n        handleDOM\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'true')\n      },\n    })\n    return\n  }\n  if (selection.isRowSelection()) {\n    const { $head } = selection\n    const rowNode = findParent(\n      (node) =>\n        node.type.name === 'table_row' || node.type.name === 'table_header_row'\n    )($head)\n    if (!rowNode) return\n    const rowIndex = findNodeIndex(table.node, rowNode.node)\n    computeRowHandlePositionByIndex({\n      refs,\n      index: [rowIndex, 0],\n      before: (handleDOM) => {\n        if (rowIndex > 0)\n          handleDOM\n            .querySelector('.button-group')\n            ?.setAttribute('data-show', 'true')\n      },\n    })\n  }\n}\n\ninterface ComputeHandlePositionByIndexProps {\n  refs: Refs\n  index: CellIndex\n  before?: (handleDOM: HTMLDivElement) => void\n  after?: (handleDOM: HTMLDivElement) => void\n}\n\nexport function computeColHandlePositionByIndex({\n  refs,\n  index,\n  before,\n  after,\n}: ComputeHandlePositionByIndexProps) {\n  const { contentWrapperRef, colHandleRef, hoverIndex } = refs\n  const colHandle = colHandleRef.value\n  if (!colHandle) return\n\n  hoverIndex.value = index\n  const dom = getRelatedDOM(contentWrapperRef, index)\n  if (!dom) return\n  const { headerCol: col } = dom\n  colHandle.dataset.show = 'true'\n  if (before) before(colHandle)\n  computePosition(col, colHandle, { placement: 'top' })\n    .then(({ x, y }) => {\n      Object.assign(colHandle.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      })\n      if (after) after(colHandle)\n    })\n    .catch(console.error)\n}\n\nexport function computeRowHandlePositionByIndex({\n  refs,\n  index,\n  before,\n  after,\n}: ComputeHandlePositionByIndexProps) {\n  const { contentWrapperRef, rowHandleRef, hoverIndex } = refs\n  const rowHandle = rowHandleRef.value\n  if (!rowHandle) return\n\n  hoverIndex.value = index\n  const dom = getRelatedDOM(contentWrapperRef, index)\n  if (!dom) return\n  const { row } = dom\n  rowHandle.dataset.show = 'true'\n  if (before) before(rowHandle)\n  computePosition(row, rowHandle, { placement: 'left' })\n    .then(({ x, y }) => {\n      Object.assign(rowHandle.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      })\n      if (after) after(rowHandle)\n    })\n    .catch(console.error)\n}\n","import type { Ctx } from '@milkdown/ctx'\n\nimport { computePosition, offset } from '@floating-ui/dom'\nimport { commandsCtx, editorViewCtx } from '@milkdown/core'\nimport {\n  moveColCommand,\n  moveRowCommand,\n  selectColCommand,\n  selectRowCommand,\n} from '@milkdown/preset-gfm'\nimport throttle from 'lodash.throttle'\nimport { onMounted, onUnmounted } from 'vue'\n\nimport type { CellIndex, DragContext, Refs } from './types'\n\nimport {\n  computeColHandlePositionByIndex,\n  computeRowHandlePositionByIndex,\n  getRelatedDOM,\n} from './utils'\n\nfunction prepareDndContext(refs: Refs): DragContext | undefined {\n  const {\n    dragPreviewRef,\n    tableWrapperRef,\n    contentWrapperRef,\n    yLineHandleRef,\n    xLineHandleRef,\n    colHandleRef,\n    rowHandleRef,\n  } = refs\n\n  const preview = dragPreviewRef.value\n  if (!preview) return\n  const wrapper = tableWrapperRef.value\n  if (!wrapper) return\n  const content = contentWrapperRef.value\n  if (!content) return\n  const contentRoot = content.querySelector('tbody')\n  if (!contentRoot) return\n  const previewRoot = preview.querySelector('tbody')\n  if (!previewRoot) return\n  const yHandle = yLineHandleRef.value\n  if (!yHandle) return\n  const xHandle = xLineHandleRef.value\n  if (!xHandle) return\n  const colHandle = colHandleRef.value\n  if (!colHandle) return\n  const rowHandle = rowHandleRef.value\n  if (!rowHandle) return\n\n  const context = {\n    preview,\n    wrapper,\n    content,\n    contentRoot,\n    previewRoot,\n    yHandle,\n    xHandle,\n    colHandle,\n    rowHandle,\n  }\n\n  return context\n}\n\nfunction handleDrag(\n  refs: Refs,\n  event: DragEvent,\n  ctx: Ctx | undefined,\n  fn: (context: DragContext) => void\n) {\n  const view = ctx?.get(editorViewCtx)\n  if (!view?.editable) return\n\n  event.stopPropagation()\n  if (event.dataTransfer) event.dataTransfer.effectAllowed = 'move'\n\n  const context = prepareDndContext(refs)\n\n  if (!context) return\n\n  // This is to avoid a chrome bug:\n  // https://stackoverflow.com/questions/14203734/dragend-dragenter-and-dragleave-firing-off-immediately-when-i-drag\n  requestAnimationFrame(() => {\n    fn(context)\n  })\n}\n\nexport function createDragRowHandler(refs: Refs, ctx?: Ctx) {\n  return (event: DragEvent) => {\n    handleDrag(\n      refs,\n      event,\n      ctx,\n      ({\n        preview,\n        content,\n        previewRoot,\n        yHandle,\n        xHandle,\n        colHandle,\n        rowHandle,\n      }) => {\n        const { hoverIndex, dragInfo } = refs\n        xHandle.dataset.displayType = 'indicator'\n        yHandle.dataset.show = 'false'\n        colHandle.dataset.show = 'false'\n        rowHandle\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'false')\n\n        const [rowIndex] = hoverIndex.value!\n\n        dragInfo.value = {\n          startCoords: [event.clientX, event.clientY],\n          startIndex: rowIndex,\n          endIndex: rowIndex,\n          type: 'row',\n        }\n        preview.dataset.direction = 'vertical'\n\n        const rows = content.querySelectorAll('tr')\n        while (previewRoot.firstChild)\n          previewRoot.removeChild(previewRoot.firstChild)\n\n        const row = rows[rowIndex]\n        if (!row) return\n\n        previewRoot.appendChild(row.cloneNode(true))\n        const height = row.getBoundingClientRect().height\n\n        const { width } = content\n          .querySelector('tbody')!\n          .getBoundingClientRect()\n        Object.assign(preview.style, {\n          width: `${width}px`,\n          height: `${height}px`,\n        })\n\n        preview.dataset.show = 'true'\n      }\n    )\n  }\n}\n\nexport function createDragColHandler(refs: Refs, ctx?: Ctx) {\n  return (event: DragEvent) => {\n    handleDrag(\n      refs,\n      event,\n      ctx,\n      ({\n        preview,\n        content,\n        previewRoot,\n        yHandle,\n        xHandle,\n        colHandle,\n        rowHandle,\n      }) => {\n        const { hoverIndex, dragInfo } = refs\n        xHandle.dataset.show = 'false'\n        yHandle.dataset.displayType = 'indicator'\n        rowHandle.dataset.show = 'false'\n        colHandle\n          .querySelector('.button-group')\n          ?.setAttribute('data-show', 'false')\n\n        const [_, colIndex] = hoverIndex.value!\n\n        dragInfo.value = {\n          startCoords: [event.clientX, event.clientY],\n          startIndex: colIndex,\n          endIndex: colIndex,\n          type: 'col',\n        }\n        preview.dataset.direction = 'horizontal'\n\n        const rows = content.querySelectorAll('tr')\n        while (previewRoot.firstChild)\n          previewRoot.removeChild(previewRoot.firstChild)\n\n        let width: number | undefined\n\n        Array.from(rows).forEach((row) => {\n          const col = row.children[colIndex]\n          if (!col) return\n\n          if (width === undefined) width = col.getBoundingClientRect().width\n\n          const tr = col.parentElement!.cloneNode(false)\n          const clone = col.cloneNode(true)\n          tr.appendChild(clone)\n          previewRoot.appendChild(tr)\n        })\n\n        const { height } = content\n          .querySelector('tbody')!\n          .getBoundingClientRect()\n        Object.assign(preview.style, {\n          width: `${width}px`,\n          height: `${height}px`,\n        })\n\n        preview.dataset.show = 'true'\n      }\n    )\n  }\n}\n\nexport function createDragOverHandler(refs: Refs): (e: DragEvent) => void {\n  return throttle((e: DragEvent) => {\n    const context = prepareDndContext(refs)\n    if (!context) return\n    const { preview, content, contentRoot, xHandle, yHandle } = context\n    const { dragInfo, hoverIndex } = refs\n\n    if (preview.dataset.show === 'false') return\n    const dom = getRelatedDOM(refs.contentWrapperRef, hoverIndex.value!)\n    if (!dom) return\n    const firstRow = contentRoot.querySelector('tr')\n    if (!firstRow) return\n    const info = dragInfo.value\n    if (!info) return\n\n    if (!contentRoot.offsetParent) return\n\n    const wrapperOffsetTop = (contentRoot.offsetParent as HTMLElement).offsetTop\n    const wrapperOffsetLeft = (contentRoot.offsetParent as HTMLElement)\n      .offsetLeft\n\n    if (info.type === 'col') {\n      const width = dom.col.getBoundingClientRect().width\n      const { left, width: fullWidth } = contentRoot.getBoundingClientRect()\n      const leftGap = wrapperOffsetLeft - left\n      const previewLeft = e.clientX + leftGap - width / 2\n      const previewRight = e.clientX + leftGap + width / 2\n\n      const [startX] = info.startCoords\n      const direction = startX < e.clientX ? 'right' : 'left'\n\n      preview.style.top = `${wrapperOffsetTop}px`\n      const previewLeftOffset =\n        previewLeft < left + leftGap - 20\n          ? left + leftGap - 20\n          : previewLeft > left + fullWidth + leftGap - width + 20\n            ? left + fullWidth + leftGap - width + 20\n            : previewLeft\n\n      preview.style.left = `${previewLeftOffset}px`\n\n      const children = Array.from(firstRow.children)\n      const col = children.find((col, index) => {\n        const boundary = col.getBoundingClientRect()\n        let boundaryLeft = boundary.left + wrapperOffsetLeft - left\n        let boundaryRight = boundary.right + wrapperOffsetLeft - left\n        if (direction === 'right') {\n          boundaryLeft = boundaryLeft + boundary.width / 2\n          boundaryRight = boundaryRight + boundary.width / 2\n          if (boundaryLeft <= previewRight && boundaryRight >= previewRight)\n            return true\n          if (\n            index === firstRow.children.length - 1 &&\n            previewRight > boundaryRight\n          )\n            return true\n        } else {\n          boundaryLeft = boundaryLeft - boundary.width / 2\n          boundaryRight = boundaryRight - boundary.width / 2\n          if (boundaryLeft <= previewLeft && boundaryRight >= previewLeft)\n            return true\n          if (index === 0 && previewLeft < boundaryLeft) return true\n        }\n\n        return false\n      })\n      if (col) {\n        const yHandleWidth = yHandle.getBoundingClientRect().width\n        const contentBoundary = content.getBoundingClientRect()\n        const index = children.indexOf(col)\n        info.endIndex = index\n\n        computePosition(col, yHandle, {\n          placement: direction === 'left' ? 'left' : 'right',\n          middleware: [offset(direction === 'left' ? -1 * yHandleWidth : 0)],\n        })\n          .then(({ x }) => {\n            yHandle.dataset.show = 'true'\n            Object.assign(yHandle.style, {\n              height: `${contentBoundary.height}px`,\n              left: `${x}px`,\n              top: `${wrapperOffsetTop}px`,\n            })\n          })\n          .catch(console.error)\n      }\n    } else if (info.type === 'row') {\n      const height = dom.row.getBoundingClientRect().height\n      const { top, height: fullHeight } = contentRoot.getBoundingClientRect()\n\n      const topGap = wrapperOffsetTop - top\n      const previewTop = e.clientY + topGap - height / 2\n      const previewBottom = e.clientY + topGap + height / 2\n\n      const [_, startY] = info.startCoords\n      const direction = startY < e.clientY ? 'down' : 'up'\n\n      const previewTopOffset =\n        previewTop < top + topGap - 20\n          ? top + topGap - 20\n          : previewTop > top + fullHeight + topGap - height + 20\n            ? top + fullHeight + topGap - height + 20\n            : previewTop\n\n      preview.style.top = `${previewTopOffset}px`\n      preview.style.left = `${wrapperOffsetLeft}px`\n\n      const rows = Array.from(contentRoot.querySelectorAll('tr'))\n      const row = rows.find((row, index) => {\n        const boundary = row.getBoundingClientRect()\n        let boundaryTop = boundary.top + wrapperOffsetTop - top\n        let boundaryBottom = boundary.bottom + wrapperOffsetTop - top\n        if (direction === 'down') {\n          boundaryTop = boundaryTop + boundary.height / 2\n          boundaryBottom = boundaryBottom + boundary.height / 2\n          if (boundaryTop <= previewBottom && boundaryBottom >= previewBottom)\n            return true\n          if (index === rows.length - 1 && previewBottom > boundaryBottom)\n            return true\n        } else {\n          boundaryTop = boundaryTop - boundary.height / 2\n          boundaryBottom = boundaryBottom - boundary.height / 2\n          if (boundaryTop <= previewTop && boundaryBottom >= previewTop)\n            return true\n          if (index === 0 && previewTop < boundaryTop) return true\n        }\n        return false\n      })\n      if (row) {\n        const xHandleHeight = xHandle.getBoundingClientRect().height\n        const contentBoundary = content.getBoundingClientRect()\n        const index = rows.indexOf(row)\n        info.endIndex = index\n\n        computePosition(row, xHandle, {\n          placement: direction === 'up' ? 'top' : 'bottom',\n          middleware: [offset(direction === 'up' ? -1 * xHandleHeight : 0)],\n        })\n          .then(({ y }) => {\n            xHandle.dataset.show = 'true'\n            Object.assign(xHandle.style, {\n              width: `${contentBoundary.width}px`,\n              top: `${y}px`,\n            })\n          })\n          .catch(console.error)\n      }\n    }\n  }, 20)\n}\n\nexport function useDragHandlers(\n  refs: Refs,\n  ctx?: Ctx,\n  getPos?: () => number | undefined\n) {\n  const { dragPreviewRef, yLineHandleRef, xLineHandleRef, dragInfo } = refs\n\n  const dragRow = createDragRowHandler(refs, ctx)\n  const dragCol = createDragColHandler(refs, ctx)\n\n  const onDragEnd = () => {\n    const preview = dragPreviewRef.value\n    if (!preview) return\n\n    if (preview.dataset.show === 'false') return\n\n    const previewRoot = preview?.querySelector('tbody')\n\n    while (previewRoot?.firstChild)\n      previewRoot?.removeChild(previewRoot.firstChild)\n\n    if (preview) preview.dataset.show = 'false'\n  }\n\n  const onDrop = () => {\n    const preview = dragPreviewRef.value\n    if (!preview) return\n    const yHandle = yLineHandleRef.value\n    if (!yHandle) return\n    const xHandle = xLineHandleRef.value\n    if (!xHandle) return\n    const info = dragInfo.value\n    if (!info) return\n    if (!ctx) return\n    if (preview.dataset.show === 'false') return\n    const colHandle = refs.colHandleRef.value\n    if (!colHandle) return\n    const rowHandle = refs.rowHandleRef.value\n    if (!rowHandle) return\n\n    yHandle.dataset.show = 'false'\n    xHandle.dataset.show = 'false'\n\n    if (info.startIndex === info.endIndex) return\n\n    const commands = ctx.get(commandsCtx)\n    const payload = {\n      from: info.startIndex,\n      to: info.endIndex,\n      pos: (getPos?.() ?? 0) + 1,\n    }\n    if (info.type === 'col') {\n      commands.call(selectColCommand.key, {\n        pos: payload.pos,\n        index: info.startIndex,\n      })\n      commands.call(moveColCommand.key, payload)\n      const index: CellIndex = [0, info.endIndex]\n      computeColHandlePositionByIndex({\n        refs,\n        index,\n      })\n    } else {\n      commands.call(selectRowCommand.key, {\n        pos: payload.pos,\n        index: info.startIndex,\n      })\n      commands.call(moveRowCommand.key, payload)\n      const index: CellIndex = [info.endIndex, 0]\n      computeRowHandlePositionByIndex({\n        refs,\n        index,\n      })\n    }\n\n    requestAnimationFrame(() => {\n      ctx.get(editorViewCtx).focus()\n    })\n  }\n  const onDragOver = createDragOverHandler(refs)\n\n  onMounted(() => {\n    window.addEventListener('dragover', onDragOver)\n    window.addEventListener('dragend', onDragEnd)\n    window.addEventListener('drop', onDrop)\n  })\n\n  onUnmounted(() => {\n    window.removeEventListener('dragover', onDragOver)\n    window.removeEventListener('dragend', onDragEnd)\n    window.removeEventListener('drop', onDrop)\n  })\n\n  return {\n    dragRow,\n    dragCol,\n  }\n}\n","import type { Ctx } from '@milkdown/ctx'\n\nimport { commandsCtx, editorViewCtx } from '@milkdown/core'\nimport {\n  addColAfterCommand,\n  addColBeforeCommand,\n  addRowAfterCommand,\n  addRowBeforeCommand,\n  deleteSelectedCellsCommand,\n  selectColCommand,\n  selectRowCommand,\n  setAlignCommand,\n} from '@milkdown/preset-gfm'\n\nimport type { Refs } from './types'\n\nexport function useOperation(\n  refs: Refs,\n  ctx?: Ctx,\n  getPos?: () => number | undefined\n) {\n  const {\n    xLineHandleRef,\n    contentWrapperRef,\n    colHandleRef,\n    rowHandleRef,\n    hoverIndex,\n    lineHoverIndex,\n  } = refs\n\n  const onAddRow = () => {\n    if (!ctx) return\n    const xHandle = xLineHandleRef.value\n    if (!xHandle) return\n\n    const [rowIndex] = lineHoverIndex.value!\n    if (rowIndex < 0) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    const rows = Array.from(\n      contentWrapperRef.value?.querySelectorAll('tr') ?? []\n    )\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    if (rows.length === rowIndex) {\n      commands.call(selectRowCommand.key, { pos, index: rowIndex - 1 })\n      commands.call(addRowAfterCommand.key)\n    } else {\n      commands.call(selectRowCommand.key, { pos, index: rowIndex })\n      commands.call(addRowBeforeCommand.key)\n    }\n\n    commands.call(selectRowCommand.key, { pos, index: rowIndex })\n    xHandle.dataset.show = 'false'\n  }\n\n  const onAddCol = () => {\n    if (!ctx) return\n    const xHandle = xLineHandleRef.value\n    if (!xHandle) return\n\n    const [_, colIndex] = lineHoverIndex.value!\n    if (colIndex < 0) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    const cols = Array.from(\n      contentWrapperRef.value?.querySelector('tr')?.children ?? []\n    )\n    const commands = ctx.get(commandsCtx)\n\n    const pos = (getPos?.() ?? 0) + 1\n    if (cols.length === colIndex) {\n      commands.call(selectColCommand.key, { pos, index: colIndex - 1 })\n      commands.call(addColAfterCommand.key)\n    } else {\n      commands.call(selectColCommand.key, { pos, index: colIndex })\n      commands.call(addColBeforeCommand.key)\n    }\n\n    commands.call(selectColCommand.key, { pos, index: colIndex })\n  }\n\n  const selectCol = () => {\n    if (!ctx) return\n    const [_, colIndex] = hoverIndex.value!\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    commands.call(selectColCommand.key, { pos, index: colIndex })\n    const buttonGroup =\n      colHandleRef.value?.querySelector<HTMLElement>('.button-group')\n    if (buttonGroup)\n      buttonGroup.dataset.show =\n        buttonGroup.dataset.show === 'true' ? 'false' : 'true'\n  }\n\n  const selectRow = () => {\n    if (!ctx) return\n    const [rowIndex, _] = hoverIndex.value!\n    const commands = ctx.get(commandsCtx)\n    const pos = (getPos?.() ?? 0) + 1\n    commands.call(selectRowCommand.key, { pos, index: rowIndex })\n    const buttonGroup =\n      rowHandleRef.value?.querySelector<HTMLElement>('.button-group')\n    if (buttonGroup && rowIndex > 0)\n      buttonGroup.dataset.show =\n        buttonGroup.dataset.show === 'true' ? 'false' : 'true'\n  }\n\n  const deleteSelected = (e: PointerEvent) => {\n    if (!ctx) return\n\n    if (!ctx.get(editorViewCtx).editable) return\n\n    e.preventDefault()\n    e.stopPropagation()\n    const commands = ctx.get(commandsCtx)\n    commands.call(deleteSelectedCellsCommand.key)\n    requestAnimationFrame(() => {\n      ctx.get(editorViewCtx).focus()\n    })\n  }\n\n  const onAlign =\n    (direction: 'left' | 'center' | 'right') => (e: PointerEvent) => {\n      if (!ctx) return\n\n      if (!ctx.get(editorViewCtx).editable) return\n\n      e.preventDefault()\n      e.stopPropagation()\n      const commands = ctx.get(commandsCtx)\n      commands.call(setAlignCommand.key, direction)\n      requestAnimationFrame(() => {\n        ctx.get(editorViewCtx).focus()\n      })\n    }\n\n  return {\n    onAddRow,\n    onAddCol,\n    selectCol,\n    selectRow,\n    deleteSelected,\n    onAlign,\n  }\n}\n","import type { EditorView } from '@milkdown/prose/view'\n\nimport { computePosition, offset } from '@floating-ui/dom'\nimport throttle from 'lodash.throttle'\n\nimport type { Refs } from './types'\n\nimport {\n  computeColHandlePositionByIndex,\n  computeRowHandlePositionByIndex,\n  findPointerIndex,\n  getRelatedDOM,\n} from './utils'\n\nexport function createPointerMoveHandler(\n  refs: Refs,\n  view?: EditorView\n): (e: PointerEvent) => void {\n  return throttle((e: PointerEvent) => {\n    if (!view?.editable) return\n    const {\n      contentWrapperRef,\n      yLineHandleRef,\n      xLineHandleRef,\n      colHandleRef,\n      rowHandleRef,\n      hoverIndex,\n      lineHoverIndex,\n    } = refs\n    const yHandle = yLineHandleRef.value\n    if (!yHandle) return\n    const xHandle = xLineHandleRef.value\n    if (!xHandle) return\n    const content = contentWrapperRef.value\n    if (!content) return\n    const rowHandle = rowHandleRef.value\n    if (!rowHandle) return\n    const colHandle = colHandleRef.value\n    if (!colHandle) return\n\n    const index = findPointerIndex(e, view)\n    if (!index) return\n\n    const dom = getRelatedDOM(contentWrapperRef, index)\n    if (!dom) return\n\n    const [rowIndex, colIndex] = index\n    const boundary = dom.col.getBoundingClientRect()\n    const closeToBoundaryLeft = Math.abs(e.clientX - boundary.left) < 8\n    const closeToBoundaryRight = Math.abs(boundary.right - e.clientX) < 8\n    const closeToBoundaryTop = Math.abs(e.clientY - boundary.top) < 8\n    const closeToBoundaryBottom = Math.abs(boundary.bottom - e.clientY) < 8\n\n    const closeToBoundary =\n      closeToBoundaryLeft ||\n      closeToBoundaryRight ||\n      closeToBoundaryTop ||\n      closeToBoundaryBottom\n\n    const rowButtonGroup = rowHandle.querySelector<HTMLElement>('.button-group')\n    const colButtonGroup = colHandle.querySelector<HTMLElement>('.button-group')\n    if (rowButtonGroup) rowButtonGroup.dataset.show = 'false'\n    if (colButtonGroup) colButtonGroup.dataset.show = 'false'\n\n    if (closeToBoundary) {\n      const contentBoundary = content.getBoundingClientRect()\n      rowHandle.dataset.show = 'false'\n      colHandle.dataset.show = 'false'\n      xHandle.dataset.displayType = 'tool'\n      yHandle.dataset.displayType = 'tool'\n\n      const yHandleWidth = yHandle.getBoundingClientRect().width\n      const xHandleHeight = xHandle.getBoundingClientRect().height\n\n      // display vertical line handle\n      if (closeToBoundaryLeft || closeToBoundaryRight) {\n        lineHoverIndex.value![1] = closeToBoundaryLeft ? colIndex : colIndex + 1\n        computePosition(dom.col, yHandle, {\n          placement: closeToBoundaryLeft ? 'left' : 'right',\n          middleware: [offset(closeToBoundaryLeft ? -1 * yHandleWidth : 0)],\n        })\n          .then(({ x }) => {\n            yHandle.dataset.show = 'true'\n            Object.assign(yHandle.style, {\n              height: `${contentBoundary.height}px`,\n              left: `${x}px`,\n            })\n          })\n          .catch(console.error)\n      } else {\n        yHandle.dataset.show = 'false'\n      }\n\n      // display horizontal line handle\n      // won't display if the row is the header row\n      if (index[0] !== 0 && (closeToBoundaryTop || closeToBoundaryBottom)) {\n        lineHoverIndex.value![0] = closeToBoundaryTop ? rowIndex : rowIndex + 1\n        computePosition(dom.row, xHandle, {\n          placement: closeToBoundaryTop ? 'top' : 'bottom',\n          middleware: [offset(closeToBoundaryTop ? -1 * xHandleHeight : 0)],\n        })\n          .then(({ y }) => {\n            xHandle.dataset.show = 'true'\n            Object.assign(xHandle.style, {\n              width: `${contentBoundary.width}px`,\n              top: `${y}px`,\n            })\n          })\n          .catch(console.error)\n      } else {\n        xHandle.dataset.show = 'false'\n      }\n\n      return\n    }\n\n    lineHoverIndex.value = [-1, -1]\n\n    yHandle.dataset.show = 'false'\n    xHandle.dataset.show = 'false'\n    rowHandle.dataset.show = 'true'\n    colHandle.dataset.show = 'true'\n\n    computeRowHandlePositionByIndex({\n      refs,\n      index,\n    })\n    computeColHandlePositionByIndex({\n      refs,\n      index,\n    })\n    hoverIndex.value = index\n  }, 20)\n}\n\nexport function createPointerLeaveHandler(refs: Refs): () => void {\n  return () => {\n    const { rowHandleRef, colHandleRef, yLineHandleRef, xLineHandleRef } = refs\n    setTimeout(() => {\n      const rowHandle = rowHandleRef.value\n      if (!rowHandle) return\n      const colHandle = colHandleRef.value\n      if (!colHandle) return\n      const yHandle = yLineHandleRef.value\n      if (!yHandle) return\n      const xHandle = xLineHandleRef.value\n      if (!xHandle) return\n\n      rowHandle.dataset.show = 'false'\n      colHandle.dataset.show = 'false'\n      yHandle.dataset.show = 'false'\n      xHandle.dataset.show = 'false'\n    }, 200)\n  }\n}\n\nexport function usePointerHandlers(refs: Refs, view?: EditorView) {\n  const pointerMove = createPointerMoveHandler(refs, view)\n  const pointerLeave = createPointerLeaveHandler(refs)\n\n  return {\n    pointerMove,\n    pointerLeave,\n  }\n}\n","import type { Ctx } from '@milkdown/ctx'\nimport type { Node } from '@milkdown/prose/model'\nimport type { EditorView } from '@milkdown/prose/view'\n\nimport {\n  defineComponent,\n  ref,\n  type VNodeRef,\n  h,\n  onMounted,\n  type Ref,\n} from 'vue'\n\nimport type { TableBlockConfig } from '../config'\nimport type { CellIndex, DragInfo, Refs } from './types'\n\nimport { Icon } from '../../__internal__/components/icon'\nimport { useDragHandlers } from './drag'\nimport { useOperation } from './operation'\nimport { usePointerHandlers } from './pointer'\nimport { recoveryStateBetweenUpdate } from './utils'\n\ntype TableBlockProps = {\n  view: EditorView\n  ctx: Ctx\n  getPos: () => number | undefined\n  config: TableBlockConfig\n  onMount: (div: Element) => void\n  node: Ref<Node>\n}\n\nh\n\nexport const TableBlock = defineComponent<TableBlockProps>({\n  props: {\n    view: {\n      type: Object,\n      required: true,\n    },\n    ctx: {\n      type: Object,\n      required: true,\n    },\n    getPos: {\n      type: Function,\n      required: true,\n    },\n    config: {\n      type: Object,\n      required: true,\n    },\n    onMount: {\n      type: Function,\n      required: true,\n    },\n    node: {\n      type: Object,\n      required: true,\n    },\n  },\n  setup({ view, node, ctx, getPos, config, onMount }) {\n    const contentWrapperRef = ref<HTMLElement>()\n    const contentWrapperFunctionRef: VNodeRef = (div) => {\n      if (div == null) return\n      if (div instanceof HTMLElement) {\n        contentWrapperRef.value = div\n        onMount(div)\n      } else {\n        contentWrapperRef.value = undefined\n      }\n    }\n    const colHandleRef = ref<HTMLDivElement>()\n    const rowHandleRef = ref<HTMLDivElement>()\n    const xLineHandleRef = ref<HTMLDivElement>()\n    const yLineHandleRef = ref<HTMLDivElement>()\n    const tableWrapperRef = ref<HTMLDivElement>()\n    const dragPreviewRef = ref<HTMLDivElement>()\n    const hoverIndex = ref<CellIndex>([0, 0])\n    const lineHoverIndex = ref<CellIndex>([-1, -1])\n    const dragInfo = ref<DragInfo>()\n\n    const refs: Refs = {\n      dragPreviewRef,\n      tableWrapperRef,\n      contentWrapperRef,\n      yLineHandleRef,\n      xLineHandleRef,\n      colHandleRef,\n      rowHandleRef,\n      hoverIndex,\n      lineHoverIndex,\n      dragInfo,\n    }\n\n    const { pointerLeave, pointerMove } = usePointerHandlers(refs, view)\n    const { dragRow, dragCol } = useDragHandlers(refs, ctx, getPos)\n    const {\n      onAddRow,\n      onAddCol,\n      selectCol,\n      selectRow,\n      deleteSelected,\n      onAlign,\n    } = useOperation(refs, ctx, getPos)\n\n    onMounted(() => {\n      requestAnimationFrame(() => {\n        // This is a wordaround to keep the popover open when click the select col/row button\n        if (view.editable) recoveryStateBetweenUpdate(refs, view, node.value)\n      })\n    })\n\n    return () => {\n      return (\n        <div\n          onDragstart={(e) => e.preventDefault()}\n          onDragover={(e) => e.preventDefault()}\n          onDragleave={(e) => e.preventDefault()}\n          onPointermove={pointerMove}\n          onPointerleave={pointerLeave}\n        >\n          <button\n            type=\"button\"\n            data-show=\"false\"\n            contenteditable=\"false\"\n            draggable=\"true\"\n            data-role=\"col-drag-handle\"\n            class=\"handle cell-handle\"\n            onDragstart={dragCol}\n            onClick={selectCol}\n            onPointerdown={(e: PointerEvent) => e.stopPropagation()}\n            onPointermove={(e: PointerEvent) => e.stopPropagation()}\n            ref={colHandleRef}\n          >\n            <Icon icon={config.renderButton('col_drag_handle')} />\n            <div\n              data-show=\"false\"\n              class=\"button-group\"\n              onPointermove={(e: PointerEvent) => e.stopPropagation()}\n            >\n              <button type=\"button\" onPointerdown={onAlign('left')}>\n                <Icon icon={config.renderButton('align_col_left')} />\n              </button>\n              <button type=\"button\" onPointerdown={onAlign('center')}>\n                <Icon icon={config.renderButton('align_col_center')} />\n              </button>\n              <button type=\"button\" onPointerdown={onAlign('right')}>\n                <Icon icon={config.renderButton('align_col_right')} />\n              </button>\n              <button type=\"button\" onPointerdown={deleteSelected}>\n                <Icon icon={config.renderButton('delete_col')} />\n              </button>\n            </div>\n          </button>\n          <button\n            type=\"button\"\n            data-show=\"false\"\n            contenteditable=\"false\"\n            draggable=\"true\"\n            data-role=\"row-drag-handle\"\n            class=\"handle cell-handle\"\n            onDragstart={dragRow}\n            onClick={selectRow}\n            onPointerdown={(e: PointerEvent) => e.stopPropagation()}\n            onPointermove={(e: PointerEvent) => e.stopPropagation()}\n            ref={rowHandleRef}\n          >\n            <Icon icon={config.renderButton('row_drag_handle')} />\n            <div\n              data-show=\"false\"\n              class=\"button-group\"\n              onPointermove={(e: PointerEvent) => e.stopPropagation()}\n            >\n              <button type=\"button\" onPointerdown={deleteSelected}>\n                <Icon icon={config.renderButton('delete_row')} />\n              </button>\n            </div>\n          </button>\n          <div class=\"table-wrapper\" ref={tableWrapperRef}>\n            <div\n              data-show=\"false\"\n              class=\"drag-preview\"\n              data-direction=\"vertical\"\n              ref={dragPreviewRef}\n            >\n              <table>\n                <tbody></tbody>\n              </table>\n            </div>\n            <div\n              data-show=\"false\"\n              contenteditable=\"false\"\n              data-display-type=\"tool\"\n              data-role=\"x-line-drag-handle\"\n              class=\"handle line-handle\"\n              onPointermove={(e: PointerEvent) => e.stopPropagation()}\n              ref={xLineHandleRef}\n            >\n              <button type=\"button\" onClick={onAddRow} class=\"add-button\">\n                <Icon icon={config.renderButton('add_row')} />\n              </button>\n            </div>\n            <div\n              data-show=\"false\"\n              contenteditable=\"false\"\n              data-display-type=\"tool\"\n              data-role=\"y-line-drag-handle\"\n              class=\"handle line-handle\"\n              onPointermove={(e: PointerEvent) => e.stopPropagation()}\n              ref={yLineHandleRef}\n            >\n              <button type=\"button\" onClick={onAddCol} class=\"add-button\">\n                <Icon icon={config.renderButton('add_col')} />\n              </button>\n            </div>\n            <table ref={contentWrapperFunctionRef} class=\"children\"></table>\n          </div>\n        </div>\n      )\n    }\n  },\n})\n","import type { Ctx } from '@milkdown/ctx'\nimport type { Node } from '@milkdown/prose/model'\nimport type {\n  EditorView,\n  NodeView,\n  NodeViewConstructor,\n  ViewMutationRecord,\n} from '@milkdown/prose/view'\n\nimport { tableSchema } from '@milkdown/preset-gfm'\nimport { findParent } from '@milkdown/prose'\nimport { NodeSelection, TextSelection } from '@milkdown/prose/state'\nimport { CellSelection } from '@milkdown/prose/tables'\nimport { $view } from '@milkdown/utils'\nimport { createApp, shallowRef, type App, type ShallowRef } from 'vue'\n\nimport { withMeta } from '../../__internal__/meta'\nimport { tableBlockConfig } from '../config'\nimport { TableBlock } from './component'\n\nexport class TableNodeView implements NodeView {\n  dom: HTMLElement\n  contentDOM: HTMLElement\n  app: App\n\n  nodeRef: ShallowRef<Node>\n\n  constructor(\n    public ctx: Ctx,\n    public node: Node,\n    public view: EditorView,\n    public getPos: () => number | undefined\n  ) {\n    const dom = document.createElement('div')\n    dom.className = 'milkdown-table-block'\n\n    const contentDOM = document.createElement('tbody')\n    this.contentDOM = contentDOM\n    contentDOM.setAttribute('data-content-dom', 'true')\n    contentDOM.classList.add('content-dom')\n    this.nodeRef = shallowRef(node)\n\n    const app = createApp(TableBlock, {\n      view,\n      ctx,\n      getPos,\n      config: ctx.get(tableBlockConfig.key),\n      onMount: (div: Element) => {\n        div.appendChild(contentDOM)\n      },\n      node: this.nodeRef,\n    })\n    app.mount(dom)\n    this.app = app\n\n    this.dom = dom\n  }\n\n  update(node: Node) {\n    if (node.type !== this.node.type) return false\n\n    if (node.sameMarkup(this.node) && node.content.eq(this.node.content))\n      return false\n\n    this.node = node\n    this.nodeRef.value = node\n\n    return true\n  }\n\n  #handleClick(event: PointerEvent) {\n    const view = this.view\n    if (!view.editable) return false\n\n    const { state, dispatch } = view\n    const pos = view.posAtCoords({ left: event.clientX, top: event.clientY })\n\n    if (!pos) return false\n\n    const $pos = state.doc.resolve(pos.inside)\n    const node = findParent(\n      (node) =>\n        node.type.name === 'table_cell' || node.type.name === 'table_header'\n    )($pos)\n\n    if (!node) return false\n\n    // if the selection is a text selection, and the current node is the same as the node, return false\n    if (state.selection instanceof TextSelection) {\n      const currentNode = findParent(\n        (node) =>\n          node.type.name === 'table_cell' || node.type.name === 'table_header'\n      )(state.selection.$from)\n      if (currentNode?.node === node.node) return false\n    }\n\n    const { from } = node\n\n    const selection = NodeSelection.create(state.doc, from + 1)\n    if (state.selection.eq(selection)) return false\n\n    if (state.selection instanceof CellSelection) {\n      setTimeout(() => {\n        dispatch(state.tr.setSelection(selection).scrollIntoView())\n      }, 20)\n    } else {\n      requestAnimationFrame(() => {\n        dispatch(state.tr.setSelection(selection).scrollIntoView())\n      })\n    }\n    return true\n  }\n\n  stopEvent(e: Event) {\n    if (e.type === 'drop' || e.type.startsWith('drag')) return true\n\n    if (e.type === 'mousedown' || e.type === 'pointerdown') {\n      if (e.target instanceof Element && e.target.closest('button')) return true\n\n      const target = e.target\n      if (\n        target instanceof HTMLElement &&\n        (target.closest('th') || target.closest('td'))\n      ) {\n        const event = e as PointerEvent\n        return this.#handleClick(event)\n      }\n    }\n\n    return false\n  }\n\n  ignoreMutation(mutation: ViewMutationRecord) {\n    if (!this.dom || !this.contentDOM) return true\n\n    if ((mutation.type as unknown) === 'selection') return false\n\n    if (this.contentDOM === mutation.target && mutation.type === 'attributes')\n      return true\n\n    if (this.contentDOM.contains(mutation.target)) return false\n\n    return true\n  }\n\n  destroy() {\n    this.app.unmount()\n    this.dom.remove()\n    this.contentDOM.remove()\n  }\n}\n\nexport const tableBlockView = $view(\n  tableSchema.node,\n  (ctx): NodeViewConstructor => {\n    return (initialNode, view, getPos) => {\n      return new TableNodeView(ctx, initialNode, view, getPos)\n    }\n  }\n)\n\nwithMeta(tableBlockView, {\n  displayName: 'NodeView<table-block>',\n  group: 'TableBlock',\n})\n","import type { MilkdownPlugin } from '@milkdown/ctx'\n\nimport { tableBlockConfig } from './config'\nimport { tableBlockView } from './view'\n\nexport * from './view'\nexport * from './config'\n\nexport const tableBlock: MilkdownPlugin[] = [tableBlockConfig, tableBlockView]\n"],"names":["__spreadValues","node","col","row"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEgB,SAAA,QAAA,CACd,QACA,IACG,EAAA;AACH,EAAA,MAAA,CAAO,OAAO,MAAQ,EAAA;AAAA,IACpB,IAAM,EAAAA,gBAAA,CAAA;AAAA,MACJ,OAAS,EAAA;AAAA,KACN,EAAA,IAAA;AAAA,GAEN,CAAA;AAED,EAAO,OAAA,MAAA;AACT;;;;;;;;;;;;;;;;;;ACKA,MAAM,uBAA4C,GAAA;AAAA,EAChD,YAAA,EAAc,CAAC,UAAe,KAAA;AAC5B,IAAA,QAAQ,UAAY;AAAA,MAClB,KAAK,SAAA;AACH,QAAO,OAAA,GAAA;AAAA,MACT,KAAK,SAAA;AACH,QAAO,OAAA,GAAA;AAAA,MACT,KAAK,YAAA;AACH,QAAO,OAAA,GAAA;AAAA,MACT,KAAK,YAAA;AACH,QAAO,OAAA,GAAA;AAAA,MACT,KAAK,gBAAA;AACH,QAAO,OAAA,MAAA;AAAA,MACT,KAAK,kBAAA;AACH,QAAO,OAAA,QAAA;AAAA,MACT,KAAK,iBAAA;AACH,QAAO,OAAA,OAAA;AAAA,MACT,KAAK,iBAAA;AACH,QAAO,OAAA,GAAA;AAAA,MACT,KAAK,iBAAA;AACH,QAAO,OAAA,GAAA;AAAA;AACX;AAEJ,CAAA;AAEO,MAAM,gBAAmB,GAAA,IAAA;AAAA,EAC9B,cAAK,CAAA,EAAA,EAAA,uBAAA,CAAA;AAAA,EACL;AACF;AAEA,QAAA,CAAS,gBAAkB,EAAA;AAAA,EACzB,WAAa,EAAA,qBAAA;AAAA,EACb,KAAO,EAAA;AACT,CAAC,CAAA;;ACxCM,SAAS,KAAK,EAAE,IAAA,EAAM,KAAO,EAAA,SAAA,EAAW,SAAsB,EAAA;AACnE,EACE,uBAAA,CAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,IAAK,CAAA,eAAA,EAAiB,SAAS,CAAA;AAAA,MACtC,aAAe,EAAA,OAAA;AAAA,MACf,GAAA,EAAK,CAAC,EAAO,KAAA;AACX,QAAA,IAAI,MAAM,IAAM,EAAA;AACb,UAAC,GAAmB,SAAY,GAAA,SAAA,CAAU,QAAS,CAAA,IAAA,CAAK,MAAM,CAAA;AAAA;AACjE;AACF;AAAA,GACF;AAEJ;AAEA,IAAA,CAAK,KAAQ,GAAA;AAAA,EACX,IAAM,EAAA;AAAA,IACJ,IAAM,EAAA,MAAA;AAAA,IACN,QAAU,EAAA;AAAA,GACZ;AAAA,EACA,KAAO,EAAA;AAAA,IACL,IAAM,EAAA,MAAA;AAAA,IACN,QAAU,EAAA;AAAA,GACZ;AAAA,EACA,OAAS,EAAA;AAAA,IACP,IAAM,EAAA,QAAA;AAAA,IACN,QAAU,EAAA;AAAA;AAEd,CAAA;;AC5BgB,SAAA,aAAA,CAAc,QAAc,KAAa,EAAA;AACvD,EAAA,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,MAAA,CAAO,YAAY,CAAK,EAAA,EAAA;AAC1C,IAAA,IAAI,MAAO,CAAA,KAAA,CAAM,CAAC,CAAA,KAAM,OAAc,OAAA,CAAA;AAAA;AAExC,EAAO,OAAA,EAAA;AACT;AAEgB,SAAA,gBAAA,CACd,OACA,IACuB,EAAA;AArBzB,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA;AAsBE,EAAA,IAAI,CAAC,IAAM,EAAA;AAEX,EAAI,IAAA;AACF,IAAM,MAAA,WAAA,GAAc,KAAK,WAAY,CAAA;AAAA,MACnC,MAAM,KAAM,CAAA,OAAA;AAAA,MACZ,KAAK,KAAM,CAAA;AAAA,KACZ,CAAA;AACD,IAAA,IAAI,CAAC,WAAa,EAAA;AAClB,IAAA,MAAM,MAAM,WAAa,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,WAAA,CAAA,MAAA;AACzB,IAAI,IAAA,GAAA,IAAO,IAAQ,IAAA,GAAA,GAAM,CAAG,EAAA;AAE5B,IAAA,MAAM,IAAO,GAAA,IAAA,CAAK,KAAM,CAAA,GAAA,CAAI,QAAQ,GAAG,CAAA;AACvC,IAAA,MAAM,IAAO,GAAA,IAAA,CAAK,KAAM,CAAA,GAAA,CAAI,OAAO,GAAG,CAAA;AACtC,IAAA,IAAI,CAAC,IAAM,EAAA;AAEX,IAAM,MAAA,QAAA,GAAW,CAAC,YAAA,EAAc,cAAc,CAAA;AAC9C,IAAM,MAAA,OAAA,GAAU,CAAC,WAAA,EAAa,kBAAkB,CAAA;AAEhD,IAAM,MAAA,IAAA,GAAO,SAAS,QAAS,CAAA,IAAA,CAAK,KAAK,IAAI,CAAA,GACzC,QACA,EAAW,GAAA,UAAA,CAAA,CAACC,UAAS,QAAS,CAAA,QAAA,CAASA,MAAK,IAAK,CAAA,IAAI,CAAC,CAAE,CAAA,IAAI,MAA5D,IAA+D,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA;AACnE,IAAM,MAAA,GAAA,GAAA,CAAM,gBAAW,CAACA,KAAAA,KAAS,QAAQ,QAASA,CAAAA,KAAAA,CAAK,IAAK,CAAA,IAAI,CAAC,CAAA;AAAA,MAC/D;AAAA,UADU,IAET,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA;AACH,IAAM,MAAA,KAAA,GAAA,CAAQ,EAAW,GAAA,UAAA,CAAA,CAACA,KAASA,KAAAA,KAAAA,CAAK,IAAK,CAAA,IAAA,KAAS,OAAO,CAAA,CAAE,IAAI,CAAA,KAArD,IAAwD,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA;AACtE,IAAA,IAAI,CAAC,IAAA,IAAQ,CAAC,GAAA,IAAO,CAAC,KAAO,EAAA;AAE7B,IAAM,MAAA,WAAA,GAAc,aAAc,CAAA,GAAA,EAAK,IAAI,CAAA;AAC3C,IAAM,MAAA,QAAA,GAAW,aAAc,CAAA,KAAA,EAAO,GAAG,CAAA;AAEzC,IAAO,OAAA,CAAC,UAAU,WAAW,CAAA;AAAA,GACvB,CAAA,OAAA,CAAA,EAAA;AACN,IAAO,OAAA,MAAA;AAAA;AAEX;AAEO,SAAS,aACd,CAAA,iBAAA,EACA,CAAC,QAAA,EAAU,WAAW,CACtB,EAAA;AACA,EAAA,MAAM,UAAU,iBAAkB,CAAA,KAAA;AAClC,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAM,MAAA,IAAA,GAAO,OAAQ,CAAA,gBAAA,CAAiB,IAAI,CAAA;AAC1C,EAAM,MAAA,GAAA,GAAM,KAAK,QAAQ,CAAA;AACzB,EAAA,IAAI,CAAC,GAAK,EAAA;AAEV,EAAM,MAAA,QAAA,GAAW,KAAK,CAAC,CAAA;AACvB,EAAA,IAAI,CAAC,QAAU,EAAA;AAEf,EAAM,MAAA,SAAA,GAAY,QAAS,CAAA,QAAA,CAAS,WAAW,CAAA;AAC/C,EAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,EAAM,MAAA,GAAA,GAAM,GAAI,CAAA,QAAA,CAAS,WAAW,CAAA;AACpC,EAAA,IAAI,CAAC,GAAK,EAAA;AAEV,EAAO,OAAA;AAAA,IACL,GAAA;AAAA,IACA,GAAA;AAAA,IACA;AAAA,GACF;AACF;AAEgB,SAAA,0BAAA,CACd,IACA,EAAA,IAAA,EACA,IACA,EAAA;AACA,EAAA,IAAI,CAAC,IAAM,EAAA;AACX,EAAA,IAAI,CAAC,IAAM,EAAA;AACX,EAAM,MAAA,EAAE,SAAU,EAAA,GAAI,IAAK,CAAA,KAAA;AAC3B,EAAI,IAAA,EAAE,qBAAqB,aAAgB,CAAA,EAAA;AAE3C,EAAM,MAAA,EAAE,OAAU,GAAA,SAAA;AAClB,EAAM,MAAA,KAAA,GAAQ,UAAU,KAAK,CAAA;AAC7B,EAAA,IAAI,CAAC,KAAA,IAAS,KAAM,CAAA,IAAA,KAAS,IAAM,EAAA;AAEnC,EAAI,IAAA,SAAA,CAAU,gBAAkB,EAAA;AAC9B,IAAM,MAAA,EAAE,OAAU,GAAA,SAAA;AAClB,IAAA,MAAM,QAAW,GAAA,KAAA,CAAM,KAAM,CAAA,KAAA,CAAM,QAAQ,CAAC,CAAA;AAC5C,IAAgC,+BAAA,CAAA;AAAA,MAC9B,IAAA;AAAA,MACA,KAAA,EAAO,CAAC,CAAA,EAAG,QAAQ,CAAA;AAAA,MACnB,MAAA,EAAQ,CAAC,SAAc,KAAA;AAxG7B,QAAA,IAAA,EAAA;AAyGQ,QAAA,CAAA,EAAA,GAAA,SAAA,CACG,aAAc,CAAA,eAAe,CADhC,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAEI,aAAa,WAAa,EAAA,MAAA,CAAA;AAAA;AAChC,KACD,CAAA;AACD,IAAA;AAAA;AAEF,EAAI,IAAA,SAAA,CAAU,gBAAkB,EAAA;AAC9B,IAAM,MAAA,EAAE,OAAU,GAAA,SAAA;AAClB,IAAA,MAAM,OAAU,GAAA,UAAA;AAAA,MACd,CAACA,UACCA,KAAK,CAAA,IAAA,CAAK,SAAS,WAAeA,IAAAA,KAAAA,CAAK,KAAK,IAAS,KAAA;AAAA,MACvD,KAAK,CAAA;AACP,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,QAAW,GAAA,aAAA,CAAc,KAAM,CAAA,IAAA,EAAM,QAAQ,IAAI,CAAA;AACvD,IAAgC,+BAAA,CAAA;AAAA,MAC9B,IAAA;AAAA,MACA,KAAA,EAAO,CAAC,QAAA,EAAU,CAAC,CAAA;AAAA,MACnB,MAAA,EAAQ,CAAC,SAAc,KAAA;AA3H7B,QAAA,IAAA,EAAA;AA4HQ,QAAA,IAAI,QAAW,GAAA,CAAA;AACb,UAAA,CAAA,EAAA,GAAA,SAAA,CACG,aAAc,CAAA,eAAe,CADhC,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAEI,aAAa,WAAa,EAAA,MAAA,CAAA;AAAA;AAClC,KACD,CAAA;AAAA;AAEL;AASO,SAAS,+BAAgC,CAAA;AAAA,EAC9C,IAAA;AAAA,EACA,KAAA;AAAA,EACA,MAAA;AAAA,EACA;AACF,CAAsC,EAAA;AACpC,EAAA,MAAM,EAAE,iBAAA,EAAmB,YAAc,EAAA,UAAA,EAAe,GAAA,IAAA;AACxD,EAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,EAAA,UAAA,CAAW,KAAQ,GAAA,KAAA;AACnB,EAAM,MAAA,GAAA,GAAM,aAAc,CAAA,iBAAA,EAAmB,KAAK,CAAA;AAClD,EAAA,IAAI,CAAC,GAAK,EAAA;AACV,EAAM,MAAA,EAAE,SAAW,EAAA,GAAA,EAAQ,GAAA,GAAA;AAC3B,EAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,MAAA;AACzB,EAAI,IAAA,MAAA,SAAe,SAAS,CAAA;AAC5B,EAAA,eAAA,CAAgB,GAAK,EAAA,SAAA,EAAW,EAAE,SAAA,EAAW,KAAM,EAAC,CACjD,CAAA,IAAA,CAAK,CAAC,EAAE,CAAG,EAAA,CAAA,EAAQ,KAAA;AAClB,IAAO,MAAA,CAAA,MAAA,CAAO,UAAU,KAAO,EAAA;AAAA,MAC7B,IAAA,EAAM,GAAG,CAAC,CAAA,EAAA,CAAA;AAAA,MACV,GAAA,EAAK,GAAG,CAAC,CAAA,EAAA;AAAA,KACV,CAAA;AACD,IAAI,IAAA,KAAA,QAAa,SAAS,CAAA;AAAA,GAC3B,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AACxB;AAEO,SAAS,+BAAgC,CAAA;AAAA,EAC9C,IAAA;AAAA,EACA,KAAA;AAAA,EACA,MAAA;AAAA,EACA;AACF,CAAsC,EAAA;AACpC,EAAA,MAAM,EAAE,iBAAA,EAAmB,YAAc,EAAA,UAAA,EAAe,GAAA,IAAA;AACxD,EAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,EAAA,UAAA,CAAW,KAAQ,GAAA,KAAA;AACnB,EAAM,MAAA,GAAA,GAAM,aAAc,CAAA,iBAAA,EAAmB,KAAK,CAAA;AAClD,EAAA,IAAI,CAAC,GAAK,EAAA;AACV,EAAM,MAAA,EAAE,KAAQ,GAAA,GAAA;AAChB,EAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,MAAA;AACzB,EAAI,IAAA,MAAA,SAAe,SAAS,CAAA;AAC5B,EAAA,eAAA,CAAgB,GAAK,EAAA,SAAA,EAAW,EAAE,SAAA,EAAW,MAAO,EAAC,CAClD,CAAA,IAAA,CAAK,CAAC,EAAE,CAAG,EAAA,CAAA,EAAQ,KAAA;AAClB,IAAO,MAAA,CAAA,MAAA,CAAO,UAAU,KAAO,EAAA;AAAA,MAC7B,IAAA,EAAM,GAAG,CAAC,CAAA,EAAA,CAAA;AAAA,MACV,GAAA,EAAK,GAAG,CAAC,CAAA,EAAA;AAAA,KACV,CAAA;AACD,IAAI,IAAA,KAAA,QAAa,SAAS,CAAA;AAAA,GAC3B,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AACxB;;AC3KA,SAAS,kBAAkB,IAAqC,EAAA;AAC9D,EAAM,MAAA;AAAA,IACJ,cAAA;AAAA,IACA,eAAA;AAAA,IACA,iBAAA;AAAA,IACA,cAAA;AAAA,IACA,cAAA;AAAA,IACA,YAAA;AAAA,IACA;AAAA,GACE,GAAA,IAAA;AAEJ,EAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAA,MAAM,UAAU,eAAgB,CAAA,KAAA;AAChC,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAA,MAAM,UAAU,iBAAkB,CAAA,KAAA;AAClC,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAM,MAAA,WAAA,GAAc,OAAQ,CAAA,aAAA,CAAc,OAAO,CAAA;AACjD,EAAA,IAAI,CAAC,WAAa,EAAA;AAClB,EAAM,MAAA,WAAA,GAAc,OAAQ,CAAA,aAAA,CAAc,OAAO,CAAA;AACjD,EAAA,IAAI,CAAC,WAAa,EAAA;AAClB,EAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,OAAS,EAAA;AACd,EAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,SAAW,EAAA;AAChB,EAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,EAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,EAAA,MAAM,OAAU,GAAA;AAAA,IACd,OAAA;AAAA,IACA,OAAA;AAAA,IACA,OAAA;AAAA,IACA,WAAA;AAAA,IACA,WAAA;AAAA,IACA,OAAA;AAAA,IACA,OAAA;AAAA,IACA,SAAA;AAAA,IACA;AAAA,GACF;AAEA,EAAO,OAAA,OAAA;AACT;AAEA,SAAS,UACP,CAAA,IAAA,EACA,KACA,EAAA,GAAA,EACA,EACA,EAAA;AACA,EAAM,MAAA,IAAA,GAAO,2BAAK,GAAI,CAAA,aAAA,CAAA;AACtB,EAAI,IAAA,EAAC,6BAAM,QAAU,CAAA,EAAA;AAErB,EAAA,KAAA,CAAM,eAAgB,EAAA;AACtB,EAAA,IAAI,KAAM,CAAA,YAAA,EAAoB,KAAA,CAAA,YAAA,CAAa,aAAgB,GAAA,MAAA;AAE3D,EAAM,MAAA,OAAA,GAAU,kBAAkB,IAAI,CAAA;AAEtC,EAAA,IAAI,CAAC,OAAS,EAAA;AAId,EAAA,qBAAA,CAAsB,MAAM;AAC1B,IAAA,EAAA,CAAG,OAAO,CAAA;AAAA,GACX,CAAA;AACH;AAEgB,SAAA,oBAAA,CAAqB,MAAY,GAAW,EAAA;AAC1D,EAAA,OAAO,CAAC,KAAqB,KAAA;AAC3B,IAAA,UAAA;AAAA,MACE,IAAA;AAAA,MACA,KAAA;AAAA,MACA,GAAA;AAAA,MACA,CAAC;AAAA,QACC,OAAA;AAAA,QACA,OAAA;AAAA,QACA,WAAA;AAAA,QACA,OAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA;AAAA,OACI,KAAA;AAvGZ,QAAA,IAAA,EAAA;AAwGQ,QAAM,MAAA,EAAE,UAAY,EAAA,QAAA,EAAa,GAAA,IAAA;AACjC,QAAA,OAAA,CAAQ,QAAQ,WAAc,GAAA,WAAA;AAC9B,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,QAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,QAAA,CAAA,EAAA,GAAA,SAAA,CACG,aAAc,CAAA,eAAe,CADhC,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAEI,aAAa,WAAa,EAAA,OAAA,CAAA;AAE9B,QAAM,MAAA,CAAC,QAAQ,CAAA,GAAI,UAAW,CAAA,KAAA;AAE9B,QAAA,QAAA,CAAS,KAAQ,GAAA;AAAA,UACf,WAAa,EAAA,CAAC,KAAM,CAAA,OAAA,EAAS,MAAM,OAAO,CAAA;AAAA,UAC1C,UAAY,EAAA,QAAA;AAAA,UACZ,QAAU,EAAA,QAAA;AAAA,UACV,IAAM,EAAA;AAAA,SACR;AACA,QAAA,OAAA,CAAQ,QAAQ,SAAY,GAAA,UAAA;AAE5B,QAAM,MAAA,IAAA,GAAO,OAAQ,CAAA,gBAAA,CAAiB,IAAI,CAAA;AAC1C,QAAA,OAAO,WAAY,CAAA,UAAA;AACjB,UAAY,WAAA,CAAA,WAAA,CAAY,YAAY,UAAU,CAAA;AAEhD,QAAM,MAAA,GAAA,GAAM,KAAK,QAAQ,CAAA;AACzB,QAAA,IAAI,CAAC,GAAK,EAAA;AAEV,QAAA,WAAA,CAAY,WAAY,CAAA,GAAA,CAAI,SAAU,CAAA,IAAI,CAAC,CAAA;AAC3C,QAAM,MAAA,MAAA,GAAS,GAAI,CAAA,qBAAA,EAAwB,CAAA,MAAA;AAE3C,QAAA,MAAM,EAAE,KAAM,EAAA,GAAI,QACf,aAAc,CAAA,OAAO,EACrB,qBAAsB,EAAA;AACzB,QAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,UAC3B,KAAA,EAAO,GAAG,KAAK,CAAA,EAAA,CAAA;AAAA,UACf,MAAA,EAAQ,GAAG,MAAM,CAAA,EAAA;AAAA,SAClB,CAAA;AAED,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AAAA;AACzB,KACF;AAAA,GACF;AACF;AAEgB,SAAA,oBAAA,CAAqB,MAAY,GAAW,EAAA;AAC1D,EAAA,OAAO,CAAC,KAAqB,KAAA;AAC3B,IAAA,UAAA;AAAA,MACE,IAAA;AAAA,MACA,KAAA;AAAA,MACA,GAAA;AAAA,MACA,CAAC;AAAA,QACC,OAAA;AAAA,QACA,OAAA;AAAA,QACA,WAAA;AAAA,QACA,OAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA;AAAA,OACI,KAAA;AAhKZ,QAAA,IAAA,EAAA;AAiKQ,QAAM,MAAA,EAAE,UAAY,EAAA,QAAA,EAAa,GAAA,IAAA;AACjC,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,QAAA,OAAA,CAAQ,QAAQ,WAAc,GAAA,WAAA;AAC9B,QAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,QAAA,CAAA,EAAA,GAAA,SAAA,CACG,aAAc,CAAA,eAAe,CADhC,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAEI,aAAa,WAAa,EAAA,OAAA,CAAA;AAE9B,QAAA,MAAM,CAAC,CAAA,EAAG,QAAQ,CAAA,GAAI,UAAW,CAAA,KAAA;AAEjC,QAAA,QAAA,CAAS,KAAQ,GAAA;AAAA,UACf,WAAa,EAAA,CAAC,KAAM,CAAA,OAAA,EAAS,MAAM,OAAO,CAAA;AAAA,UAC1C,UAAY,EAAA,QAAA;AAAA,UACZ,QAAU,EAAA,QAAA;AAAA,UACV,IAAM,EAAA;AAAA,SACR;AACA,QAAA,OAAA,CAAQ,QAAQ,SAAY,GAAA,YAAA;AAE5B,QAAM,MAAA,IAAA,GAAO,OAAQ,CAAA,gBAAA,CAAiB,IAAI,CAAA;AAC1C,QAAA,OAAO,WAAY,CAAA,UAAA;AACjB,UAAY,WAAA,CAAA,WAAA,CAAY,YAAY,UAAU,CAAA;AAEhD,QAAI,IAAA,KAAA;AAEJ,QAAA,KAAA,CAAM,IAAK,CAAA,IAAI,CAAE,CAAA,OAAA,CAAQ,CAAC,GAAQ,KAAA;AAChC,UAAM,MAAA,GAAA,GAAM,GAAI,CAAA,QAAA,CAAS,QAAQ,CAAA;AACjC,UAAA,IAAI,CAAC,GAAK,EAAA;AAEV,UAAA,IAAI,KAAU,KAAA,MAAA,EAAmB,KAAA,GAAA,GAAA,CAAI,uBAAwB,CAAA,KAAA;AAE7D,UAAA,MAAM,EAAK,GAAA,GAAA,CAAI,aAAe,CAAA,SAAA,CAAU,KAAK,CAAA;AAC7C,UAAM,MAAA,KAAA,GAAQ,GAAI,CAAA,SAAA,CAAU,IAAI,CAAA;AAChC,UAAA,EAAA,CAAG,YAAY,KAAK,CAAA;AACpB,UAAA,WAAA,CAAY,YAAY,EAAE,CAAA;AAAA,SAC3B,CAAA;AAED,QAAA,MAAM,EAAE,MAAO,EAAA,GAAI,QAChB,aAAc,CAAA,OAAO,EACrB,qBAAsB,EAAA;AACzB,QAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,UAC3B,KAAA,EAAO,GAAG,KAAK,CAAA,EAAA,CAAA;AAAA,UACf,MAAA,EAAQ,GAAG,MAAM,CAAA,EAAA;AAAA,SAClB,CAAA;AAED,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AAAA;AACzB,KACF;AAAA,GACF;AACF;AAEO,SAAS,sBAAsB,IAAoC,EAAA;AACxE,EAAO,OAAA,QAAA,CAAS,CAAC,CAAiB,KAAA;AAChC,IAAM,MAAA,OAAA,GAAU,kBAAkB,IAAI,CAAA;AACtC,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,EAAE,OAAS,EAAA,OAAA,EAAS,WAAa,EAAA,OAAA,EAAS,SAAY,GAAA,OAAA;AAC5D,IAAM,MAAA,EAAE,QAAU,EAAA,UAAA,EAAe,GAAA,IAAA;AAEjC,IAAI,IAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA,KAAS,OAAS,EAAA;AACtC,IAAA,MAAM,GAAM,GAAA,aAAA,CAAc,IAAK,CAAA,iBAAA,EAAmB,WAAW,KAAM,CAAA;AACnE,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAM,MAAA,QAAA,GAAW,WAAY,CAAA,aAAA,CAAc,IAAI,CAAA;AAC/C,IAAA,IAAI,CAAC,QAAU,EAAA;AACf,IAAA,MAAM,OAAO,QAAS,CAAA,KAAA;AACtB,IAAA,IAAI,CAAC,IAAM,EAAA;AAEX,IAAI,IAAA,CAAC,YAAY,YAAc,EAAA;AAE/B,IAAM,MAAA,gBAAA,GAAoB,YAAY,YAA6B,CAAA,SAAA;AACnE,IAAM,MAAA,iBAAA,GAAqB,YAAY,YACpC,CAAA,UAAA;AAEH,IAAI,IAAA,IAAA,CAAK,SAAS,KAAO,EAAA;AACvB,MAAA,MAAM,KAAQ,GAAA,GAAA,CAAI,GAAI,CAAA,qBAAA,EAAwB,CAAA,KAAA;AAC9C,MAAA,MAAM,EAAE,IAAM,EAAA,KAAA,EAAO,SAAU,EAAA,GAAI,YAAY,qBAAsB,EAAA;AACrE,MAAA,MAAM,UAAU,iBAAoB,GAAA,IAAA;AACpC,MAAA,MAAM,WAAc,GAAA,CAAA,CAAE,OAAU,GAAA,OAAA,GAAU,KAAQ,GAAA,CAAA;AAClD,MAAA,MAAM,YAAe,GAAA,CAAA,CAAE,OAAU,GAAA,OAAA,GAAU,KAAQ,GAAA,CAAA;AAEnD,MAAM,MAAA,CAAC,MAAM,CAAA,GAAI,IAAK,CAAA,WAAA;AACtB,MAAA,MAAM,SAAY,GAAA,MAAA,GAAS,CAAE,CAAA,OAAA,GAAU,OAAU,GAAA,MAAA;AAEjD,MAAQ,OAAA,CAAA,KAAA,CAAM,GAAM,GAAA,CAAA,EAAG,gBAAgB,CAAA,EAAA,CAAA;AACvC,MAAA,MAAM,oBACJ,WAAc,GAAA,IAAA,GAAO,UAAU,EAC3B,GAAA,IAAA,GAAO,UAAU,EACjB,GAAA,WAAA,GAAc,IAAO,GAAA,SAAA,GAAY,UAAU,KAAQ,GAAA,EAAA,GACjD,OAAO,SAAY,GAAA,OAAA,GAAU,QAAQ,EACrC,GAAA,WAAA;AAER,MAAQ,OAAA,CAAA,KAAA,CAAM,IAAO,GAAA,CAAA,EAAG,iBAAiB,CAAA,EAAA,CAAA;AAEzC,MAAA,MAAM,QAAW,GAAA,KAAA,CAAM,IAAK,CAAA,QAAA,CAAS,QAAQ,CAAA;AAC7C,MAAA,MAAM,GAAM,GAAA,QAAA,CAAS,IAAK,CAAA,CAACC,MAAK,KAAU,KAAA;AACxC,QAAM,MAAA,QAAA,GAAWA,KAAI,qBAAsB,EAAA;AAC3C,QAAI,IAAA,YAAA,GAAe,QAAS,CAAA,IAAA,GAAO,iBAAoB,GAAA,IAAA;AACvD,QAAI,IAAA,aAAA,GAAgB,QAAS,CAAA,KAAA,GAAQ,iBAAoB,GAAA,IAAA;AACzD,QAAA,IAAI,cAAc,OAAS,EAAA;AACzB,UAAe,YAAA,GAAA,YAAA,GAAe,SAAS,KAAQ,GAAA,CAAA;AAC/C,UAAgB,aAAA,GAAA,aAAA,GAAgB,SAAS,KAAQ,GAAA,CAAA;AACjD,UAAI,IAAA,YAAA,IAAgB,gBAAgB,aAAiB,IAAA,YAAA;AACnD,YAAO,OAAA,IAAA;AACT,UAAA,IACE,KAAU,KAAA,QAAA,CAAS,QAAS,CAAA,MAAA,GAAS,KACrC,YAAe,GAAA,aAAA;AAEf,YAAO,OAAA,IAAA;AAAA,SACJ,MAAA;AACL,UAAe,YAAA,GAAA,YAAA,GAAe,SAAS,KAAQ,GAAA,CAAA;AAC/C,UAAgB,aAAA,GAAA,aAAA,GAAgB,SAAS,KAAQ,GAAA,CAAA;AACjD,UAAI,IAAA,YAAA,IAAgB,eAAe,aAAiB,IAAA,WAAA;AAClD,YAAO,OAAA,IAAA;AACT,UAAA,IAAI,KAAU,KAAA,CAAA,IAAK,WAAc,GAAA,YAAA,EAAqB,OAAA,IAAA;AAAA;AAGxD,QAAO,OAAA,KAAA;AAAA,OACR,CAAA;AACD,MAAA,IAAI,GAAK,EAAA;AACP,QAAM,MAAA,YAAA,GAAe,OAAQ,CAAA,qBAAA,EAAwB,CAAA,KAAA;AACrD,QAAM,MAAA,eAAA,GAAkB,QAAQ,qBAAsB,EAAA;AACtD,QAAM,MAAA,KAAA,GAAQ,QAAS,CAAA,OAAA,CAAQ,GAAG,CAAA;AAClC,QAAA,IAAA,CAAK,QAAW,GAAA,KAAA;AAEhB,QAAA,eAAA,CAAgB,KAAK,OAAS,EAAA;AAAA,UAC5B,SAAA,EAAW,SAAc,KAAA,MAAA,GAAS,MAAS,GAAA,OAAA;AAAA,UAC3C,UAAA,EAAY,CAAC,MAAO,CAAA,SAAA,KAAc,SAAS,EAAK,GAAA,YAAA,GAAe,CAAC,CAAC;AAAA,SAClE,CACE,CAAA,IAAA,CAAK,CAAC,EAAE,GAAQ,KAAA;AACf,UAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AACvB,UAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,YAC3B,MAAA,EAAQ,CAAG,EAAA,eAAA,CAAgB,MAAM,CAAA,EAAA,CAAA;AAAA,YACjC,IAAA,EAAM,GAAG,CAAC,CAAA,EAAA,CAAA;AAAA,YACV,GAAA,EAAK,GAAG,gBAAgB,CAAA,EAAA;AAAA,WACzB,CAAA;AAAA,SACF,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA;AACxB,KACF,MAAA,IAAW,IAAK,CAAA,IAAA,KAAS,KAAO,EAAA;AAC9B,MAAA,MAAM,MAAS,GAAA,GAAA,CAAI,GAAI,CAAA,qBAAA,EAAwB,CAAA,MAAA;AAC/C,MAAA,MAAM,EAAE,GAAK,EAAA,MAAA,EAAQ,UAAW,EAAA,GAAI,YAAY,qBAAsB,EAAA;AAEtE,MAAA,MAAM,SAAS,gBAAmB,GAAA,GAAA;AAClC,MAAA,MAAM,UAAa,GAAA,CAAA,CAAE,OAAU,GAAA,MAAA,GAAS,MAAS,GAAA,CAAA;AACjD,MAAA,MAAM,aAAgB,GAAA,CAAA,CAAE,OAAU,GAAA,MAAA,GAAS,MAAS,GAAA,CAAA;AAEpD,MAAA,MAAM,CAAC,CAAA,EAAG,MAAM,CAAA,GAAI,IAAK,CAAA,WAAA;AACzB,MAAA,MAAM,SAAY,GAAA,MAAA,GAAS,CAAE,CAAA,OAAA,GAAU,MAAS,GAAA,IAAA;AAEhD,MAAA,MAAM,mBACJ,UAAa,GAAA,GAAA,GAAM,SAAS,EACxB,GAAA,GAAA,GAAM,SAAS,EACf,GAAA,UAAA,GAAa,GAAM,GAAA,UAAA,GAAa,SAAS,MAAS,GAAA,EAAA,GAChD,MAAM,UAAa,GAAA,MAAA,GAAS,SAAS,EACrC,GAAA,UAAA;AAER,MAAQ,OAAA,CAAA,KAAA,CAAM,GAAM,GAAA,CAAA,EAAG,gBAAgB,CAAA,EAAA,CAAA;AACvC,MAAQ,OAAA,CAAA,KAAA,CAAM,IAAO,GAAA,CAAA,EAAG,iBAAiB,CAAA,EAAA,CAAA;AAEzC,MAAA,MAAM,OAAO,KAAM,CAAA,IAAA,CAAK,WAAY,CAAA,gBAAA,CAAiB,IAAI,CAAC,CAAA;AAC1D,MAAA,MAAM,GAAM,GAAA,IAAA,CAAK,IAAK,CAAA,CAACC,MAAK,KAAU,KAAA;AACpC,QAAM,MAAA,QAAA,GAAWA,KAAI,qBAAsB,EAAA;AAC3C,QAAI,IAAA,WAAA,GAAc,QAAS,CAAA,GAAA,GAAM,gBAAmB,GAAA,GAAA;AACpD,QAAI,IAAA,cAAA,GAAiB,QAAS,CAAA,MAAA,GAAS,gBAAmB,GAAA,GAAA;AAC1D,QAAA,IAAI,cAAc,MAAQ,EAAA;AACxB,UAAc,WAAA,GAAA,WAAA,GAAc,SAAS,MAAS,GAAA,CAAA;AAC9C,UAAiB,cAAA,GAAA,cAAA,GAAiB,SAAS,MAAS,GAAA,CAAA;AACpD,UAAI,IAAA,WAAA,IAAe,iBAAiB,cAAkB,IAAA,aAAA;AACpD,YAAO,OAAA,IAAA;AACT,UAAA,IAAI,KAAU,KAAA,IAAA,CAAK,MAAS,GAAA,CAAA,IAAK,aAAgB,GAAA,cAAA;AAC/C,YAAO,OAAA,IAAA;AAAA,SACJ,MAAA;AACL,UAAc,WAAA,GAAA,WAAA,GAAc,SAAS,MAAS,GAAA,CAAA;AAC9C,UAAiB,cAAA,GAAA,cAAA,GAAiB,SAAS,MAAS,GAAA,CAAA;AACpD,UAAI,IAAA,WAAA,IAAe,cAAc,cAAkB,IAAA,UAAA;AACjD,YAAO,OAAA,IAAA;AACT,UAAA,IAAI,KAAU,KAAA,CAAA,IAAK,UAAa,GAAA,WAAA,EAAoB,OAAA,IAAA;AAAA;AAEtD,QAAO,OAAA,KAAA;AAAA,OACR,CAAA;AACD,MAAA,IAAI,GAAK,EAAA;AACP,QAAM,MAAA,aAAA,GAAgB,OAAQ,CAAA,qBAAA,EAAwB,CAAA,MAAA;AACtD,QAAM,MAAA,eAAA,GAAkB,QAAQ,qBAAsB,EAAA;AACtD,QAAM,MAAA,KAAA,GAAQ,IAAK,CAAA,OAAA,CAAQ,GAAG,CAAA;AAC9B,QAAA,IAAA,CAAK,QAAW,GAAA,KAAA;AAEhB,QAAA,eAAA,CAAgB,KAAK,OAAS,EAAA;AAAA,UAC5B,SAAA,EAAW,SAAc,KAAA,IAAA,GAAO,KAAQ,GAAA,QAAA;AAAA,UACxC,UAAA,EAAY,CAAC,MAAO,CAAA,SAAA,KAAc,OAAO,EAAK,GAAA,aAAA,GAAgB,CAAC,CAAC;AAAA,SACjE,CACE,CAAA,IAAA,CAAK,CAAC,EAAE,GAAQ,KAAA;AACf,UAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AACvB,UAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,YAC3B,KAAA,EAAO,CAAG,EAAA,eAAA,CAAgB,KAAK,CAAA,EAAA,CAAA;AAAA,YAC/B,GAAA,EAAK,GAAG,CAAC,CAAA,EAAA;AAAA,WACV,CAAA;AAAA,SACF,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA;AACxB;AACF,KACC,EAAE,CAAA;AACP;AAEgB,SAAA,eAAA,CACd,IACA,EAAA,GAAA,EACA,MACA,EAAA;AACA,EAAA,MAAM,EAAE,cAAA,EAAgB,cAAgB,EAAA,cAAA,EAAgB,UAAa,GAAA,IAAA;AAErE,EAAM,MAAA,OAAA,GAAU,oBAAqB,CAAA,IAAA,EAAM,GAAG,CAAA;AAC9C,EAAM,MAAA,OAAA,GAAU,oBAAqB,CAAA,IAAA,EAAM,GAAG,CAAA;AAE9C,EAAA,MAAM,YAAY,MAAM;AACtB,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AAEd,IAAI,IAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA,KAAS,OAAS,EAAA;AAEtC,IAAM,MAAA,WAAA,GAAc,mCAAS,aAAc,CAAA,OAAA,CAAA;AAE3C,IAAA,OAAO,WAAa,IAAA,IAAA,GAAA,MAAA,GAAA,WAAA,CAAA,UAAA;AAClB,MAAA,WAAA,IAAA,IAAA,GAAA,MAAA,GAAA,WAAA,CAAa,YAAY,WAAY,CAAA,UAAA,CAAA;AAEvC,IAAI,IAAA,OAAA,EAAiB,OAAA,CAAA,OAAA,CAAQ,IAAO,GAAA,OAAA;AAAA,GACtC;AAEA,EAAA,MAAM,SAAS,MAAM;AAlYvB,IAAA,IAAA,EAAA;AAmYI,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,OAAO,QAAS,CAAA,KAAA;AACtB,IAAA,IAAI,CAAC,IAAM,EAAA;AACX,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAI,IAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA,KAAS,OAAS,EAAA;AACtC,IAAM,MAAA,SAAA,GAAY,KAAK,YAAa,CAAA,KAAA;AACpC,IAAA,IAAI,CAAC,SAAW,EAAA;AAChB,IAAM,MAAA,SAAA,GAAY,KAAK,YAAa,CAAA,KAAA;AACpC,IAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,IAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,IAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AAEvB,IAAI,IAAA,IAAA,CAAK,UAAe,KAAA,IAAA,CAAK,QAAU,EAAA;AAEvC,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAA,MAAM,OAAU,GAAA;AAAA,MACd,MAAM,IAAK,CAAA,UAAA;AAAA,MACX,IAAI,IAAK,CAAA,QAAA;AAAA,MACT,GAAA,EAAA,CAAA,CAAM,wDAAc,CAAK,IAAA;AAAA,KAC3B;AACA,IAAI,IAAA,IAAA,CAAK,SAAS,KAAO,EAAA;AACvB,MAAS,QAAA,CAAA,IAAA,CAAK,iBAAiB,GAAK,EAAA;AAAA,QAClC,KAAK,OAAQ,CAAA,GAAA;AAAA,QACb,OAAO,IAAK,CAAA;AAAA,OACb,CAAA;AACD,MAAS,QAAA,CAAA,IAAA,CAAK,cAAe,CAAA,GAAA,EAAK,OAAO,CAAA;AACzC,MAAA,MAAM,KAAmB,GAAA,CAAC,CAAG,EAAA,IAAA,CAAK,QAAQ,CAAA;AAC1C,MAAgC,+BAAA,CAAA;AAAA,QAC9B,IAAA;AAAA,QACA;AAAA,OACD,CAAA;AAAA,KACI,MAAA;AACL,MAAS,QAAA,CAAA,IAAA,CAAK,iBAAiB,GAAK,EAAA;AAAA,QAClC,KAAK,OAAQ,CAAA,GAAA;AAAA,QACb,OAAO,IAAK,CAAA;AAAA,OACb,CAAA;AACD,MAAS,QAAA,CAAA,IAAA,CAAK,cAAe,CAAA,GAAA,EAAK,OAAO,CAAA;AACzC,MAAA,MAAM,KAAmB,GAAA,CAAC,IAAK,CAAA,QAAA,EAAU,CAAC,CAAA;AAC1C,MAAgC,+BAAA,CAAA;AAAA,QAC9B,IAAA;AAAA,QACA;AAAA,OACD,CAAA;AAAA;AAGH,IAAA,qBAAA,CAAsB,MAAM;AAC1B,MAAI,GAAA,CAAA,GAAA,CAAI,aAAa,CAAA,CAAE,KAAM,EAAA;AAAA,KAC9B,CAAA;AAAA,GACH;AACA,EAAM,MAAA,UAAA,GAAa,sBAAsB,IAAI,CAAA;AAE7C,EAAA,SAAA,CAAU,MAAM;AACd,IAAO,MAAA,CAAA,gBAAA,CAAiB,YAAY,UAAU,CAAA;AAC9C,IAAO,MAAA,CAAA,gBAAA,CAAiB,WAAW,SAAS,CAAA;AAC5C,IAAO,MAAA,CAAA,gBAAA,CAAiB,QAAQ,MAAM,CAAA;AAAA,GACvC,CAAA;AAED,EAAA,WAAA,CAAY,MAAM;AAChB,IAAO,MAAA,CAAA,mBAAA,CAAoB,YAAY,UAAU,CAAA;AACjD,IAAO,MAAA,CAAA,mBAAA,CAAoB,WAAW,SAAS,CAAA;AAC/C,IAAO,MAAA,CAAA,mBAAA,CAAoB,QAAQ,MAAM,CAAA;AAAA,GAC1C,CAAA;AAED,EAAO,OAAA;AAAA,IACL,OAAA;AAAA,IACA;AAAA,GACF;AACF;;AC3bgB,SAAA,YAAA,CACd,IACA,EAAA,GAAA,EACA,MACA,EAAA;AACA,EAAM,MAAA;AAAA,IACJ,cAAA;AAAA,IACA,iBAAA;AAAA,IACA,YAAA;AAAA,IACA,YAAA;AAAA,IACA,UAAA;AAAA,IACA;AAAA,GACE,GAAA,IAAA;AAEJ,EAAA,MAAM,WAAW,MAAM;AA9BzB,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA;AA+BI,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AAEd,IAAM,MAAA,CAAC,QAAQ,CAAA,GAAI,cAAe,CAAA,KAAA;AAClC,IAAA,IAAI,WAAW,CAAG,EAAA;AAElB,IAAA,IAAI,CAAC,GAAA,CAAI,GAAI,CAAA,aAAa,EAAE,QAAU,EAAA;AAEtC,IAAA,MAAM,OAAO,KAAM,CAAA,IAAA;AAAA,MAAA,CACjB,6BAAkB,KAAlB,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAyB,gBAAiB,CAAA,IAAA,CAAA,KAA1C,YAAmD;AAAC,KACtD;AACA,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAM,MAAA,GAAA,GAAA,CAAA,CAAO,wDAAc,CAAK,IAAA,CAAA;AAChC,IAAI,IAAA,IAAA,CAAK,WAAW,QAAU,EAAA;AAC5B,MAAS,QAAA,CAAA,IAAA,CAAK,iBAAiB,GAAK,EAAA,EAAE,KAAK,KAAO,EAAA,QAAA,GAAW,GAAG,CAAA;AAChE,MAAS,QAAA,CAAA,IAAA,CAAK,mBAAmB,GAAG,CAAA;AAAA,KAC/B,MAAA;AACL,MAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAC5D,MAAS,QAAA,CAAA,IAAA,CAAK,oBAAoB,GAAG,CAAA;AAAA;AAGvC,IAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAC5D,IAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AAAA,GACzB;AAEA,EAAA,MAAM,WAAW,MAAM;AAzDzB,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA;AA0DI,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AAEd,IAAA,MAAM,CAAC,CAAA,EAAG,QAAQ,CAAA,GAAI,cAAe,CAAA,KAAA;AACrC,IAAA,IAAI,WAAW,CAAG,EAAA;AAElB,IAAA,IAAI,CAAC,GAAA,CAAI,GAAI,CAAA,aAAa,EAAE,QAAU,EAAA;AAEtC,IAAA,MAAM,OAAO,KAAM,CAAA,IAAA;AAAA,MACjB,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,iBAAA,CAAkB,UAAlB,IAAyB,GAAA,MAAA,GAAA,EAAA,CAAA,aAAA,CAAc,UAAvC,IAA8C,GAAA,MAAA,GAAA,EAAA,CAAA,QAAA,KAA9C,YAA0D;AAAC,KAC7D;AACA,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AAEpC,IAAM,MAAA,GAAA,GAAA,CAAA,CAAO,wDAAc,CAAK,IAAA,CAAA;AAChC,IAAI,IAAA,IAAA,CAAK,WAAW,QAAU,EAAA;AAC5B,MAAS,QAAA,CAAA,IAAA,CAAK,iBAAiB,GAAK,EAAA,EAAE,KAAK,KAAO,EAAA,QAAA,GAAW,GAAG,CAAA;AAChE,MAAS,QAAA,CAAA,IAAA,CAAK,mBAAmB,GAAG,CAAA;AAAA,KAC/B,MAAA;AACL,MAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAC5D,MAAS,QAAA,CAAA,IAAA,CAAK,oBAAoB,GAAG,CAAA;AAAA;AAGvC,IAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAAA,GAC9D;AAEA,EAAA,MAAM,YAAY,MAAM;AApF1B,IAAA,IAAA,EAAA,EAAA,EAAA;AAqFI,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAA,MAAM,CAAC,CAAA,EAAG,QAAQ,CAAA,GAAI,UAAW,CAAA,KAAA;AACjC,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAM,MAAA,GAAA,GAAA,CAAA,CAAO,wDAAc,CAAK,IAAA,CAAA;AAChC,IAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAC5D,IAAA,MAAM,WACJ,GAAA,CAAA,EAAA,GAAA,YAAA,CAAa,KAAb,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAoB,aAA2B,CAAA,eAAA,CAAA;AACjD,IAAI,IAAA,WAAA;AACF,MAAA,WAAA,CAAY,QAAQ,IAClB,GAAA,WAAA,CAAY,OAAQ,CAAA,IAAA,KAAS,SAAS,OAAU,GAAA,MAAA;AAAA,GACtD;AAEA,EAAA,MAAM,YAAY,MAAM;AAjG1B,IAAA,IAAA,EAAA,EAAA,EAAA;AAkGI,IAAA,IAAI,CAAC,GAAK,EAAA;AACV,IAAA,MAAM,CAAC,QAAA,EAAU,CAAC,CAAA,GAAI,UAAW,CAAA,KAAA;AACjC,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAM,MAAA,GAAA,GAAA,CAAA,CAAO,wDAAc,CAAK,IAAA,CAAA;AAChC,IAAA,QAAA,CAAS,KAAK,gBAAiB,CAAA,GAAA,EAAK,EAAE,GAAK,EAAA,KAAA,EAAO,UAAU,CAAA;AAC5D,IAAA,MAAM,WACJ,GAAA,CAAA,EAAA,GAAA,YAAA,CAAa,KAAb,KAAA,IAAA,GAAA,MAAA,GAAA,EAAA,CAAoB,aAA2B,CAAA,eAAA,CAAA;AACjD,IAAA,IAAI,eAAe,QAAW,GAAA,CAAA;AAC5B,MAAA,WAAA,CAAY,QAAQ,IAClB,GAAA,WAAA,CAAY,OAAQ,CAAA,IAAA,KAAS,SAAS,OAAU,GAAA,MAAA;AAAA,GACtD;AAEA,EAAM,MAAA,cAAA,GAAiB,CAAC,CAAoB,KAAA;AAC1C,IAAA,IAAI,CAAC,GAAK,EAAA;AAEV,IAAA,IAAI,CAAC,GAAA,CAAI,GAAI,CAAA,aAAa,EAAE,QAAU,EAAA;AAEtC,IAAA,CAAA,CAAE,cAAe,EAAA;AACjB,IAAA,CAAA,CAAE,eAAgB,EAAA;AAClB,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAS,QAAA,CAAA,IAAA,CAAK,2BAA2B,GAAG,CAAA;AAC5C,IAAA,qBAAA,CAAsB,MAAM;AAC1B,MAAI,GAAA,CAAA,GAAA,CAAI,aAAa,CAAA,CAAE,KAAM,EAAA;AAAA,KAC9B,CAAA;AAAA,GACH;AAEA,EAAA,MAAM,OACJ,GAAA,CAAC,SAA2C,KAAA,CAAC,CAAoB,KAAA;AAC/D,IAAA,IAAI,CAAC,GAAK,EAAA;AAEV,IAAA,IAAI,CAAC,GAAA,CAAI,GAAI,CAAA,aAAa,EAAE,QAAU,EAAA;AAEtC,IAAA,CAAA,CAAE,cAAe,EAAA;AACjB,IAAA,CAAA,CAAE,eAAgB,EAAA;AAClB,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,WAAW,CAAA;AACpC,IAAS,QAAA,CAAA,IAAA,CAAK,eAAgB,CAAA,GAAA,EAAK,SAAS,CAAA;AAC5C,IAAA,qBAAA,CAAsB,MAAM;AAC1B,MAAI,GAAA,CAAA,GAAA,CAAI,aAAa,CAAA,CAAE,KAAM,EAAA;AAAA,KAC9B,CAAA;AAAA,GACH;AAEF,EAAO,OAAA;AAAA,IACL,QAAA;AAAA,IACA,QAAA;AAAA,IACA,SAAA;AAAA,IACA,SAAA;AAAA,IACA,cAAA;AAAA,IACA;AAAA,GACF;AACF;;ACrIgB,SAAA,wBAAA,CACd,MACA,IAC2B,EAAA;AAC3B,EAAO,OAAA,QAAA,CAAS,CAAC,CAAoB,KAAA;AACnC,IAAI,IAAA,EAAC,6BAAM,QAAU,CAAA,EAAA;AACrB,IAAM,MAAA;AAAA,MACJ,iBAAA;AAAA,MACA,cAAA;AAAA,MACA,cAAA;AAAA,MACA,YAAA;AAAA,MACA,YAAA;AAAA,MACA,UAAA;AAAA,MACA;AAAA,KACE,GAAA,IAAA;AACJ,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,UAAU,iBAAkB,CAAA,KAAA;AAClC,IAAA,IAAI,CAAC,OAAS,EAAA;AACd,IAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,SAAW,EAAA;AAChB,IAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,IAAA,IAAI,CAAC,SAAW,EAAA;AAEhB,IAAM,MAAA,KAAA,GAAQ,gBAAiB,CAAA,CAAA,EAAG,IAAI,CAAA;AACtC,IAAA,IAAI,CAAC,KAAO,EAAA;AAEZ,IAAM,MAAA,GAAA,GAAM,aAAc,CAAA,iBAAA,EAAmB,KAAK,CAAA;AAClD,IAAA,IAAI,CAAC,GAAK,EAAA;AAEV,IAAM,MAAA,CAAC,QAAU,EAAA,QAAQ,CAAI,GAAA,KAAA;AAC7B,IAAM,MAAA,QAAA,GAAW,GAAI,CAAA,GAAA,CAAI,qBAAsB,EAAA;AAC/C,IAAA,MAAM,sBAAsB,IAAK,CAAA,GAAA,CAAI,EAAE,OAAU,GAAA,QAAA,CAAS,IAAI,CAAI,GAAA,CAAA;AAClE,IAAA,MAAM,uBAAuB,IAAK,CAAA,GAAA,CAAI,SAAS,KAAQ,GAAA,CAAA,CAAE,OAAO,CAAI,GAAA,CAAA;AACpE,IAAA,MAAM,qBAAqB,IAAK,CAAA,GAAA,CAAI,EAAE,OAAU,GAAA,QAAA,CAAS,GAAG,CAAI,GAAA,CAAA;AAChE,IAAA,MAAM,wBAAwB,IAAK,CAAA,GAAA,CAAI,SAAS,MAAS,GAAA,CAAA,CAAE,OAAO,CAAI,GAAA,CAAA;AAEtE,IAAM,MAAA,eAAA,GACJ,mBACA,IAAA,oBAAA,IACA,kBACA,IAAA,qBAAA;AAEF,IAAM,MAAA,cAAA,GAAiB,SAAU,CAAA,aAAA,CAA2B,eAAe,CAAA;AAC3E,IAAM,MAAA,cAAA,GAAiB,SAAU,CAAA,aAAA,CAA2B,eAAe,CAAA;AAC3E,IAAI,IAAA,cAAA,EAA+B,cAAA,CAAA,OAAA,CAAQ,IAAO,GAAA,OAAA;AAClD,IAAI,IAAA,cAAA,EAA+B,cAAA,CAAA,OAAA,CAAQ,IAAO,GAAA,OAAA;AAElD,IAAA,IAAI,eAAiB,EAAA;AACnB,MAAM,MAAA,eAAA,GAAkB,QAAQ,qBAAsB,EAAA;AACtD,MAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,MAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,MAAA,OAAA,CAAQ,QAAQ,WAAc,GAAA,MAAA;AAC9B,MAAA,OAAA,CAAQ,QAAQ,WAAc,GAAA,MAAA;AAE9B,MAAM,MAAA,YAAA,GAAe,OAAQ,CAAA,qBAAA,EAAwB,CAAA,KAAA;AACrD,MAAM,MAAA,aAAA,GAAgB,OAAQ,CAAA,qBAAA,EAAwB,CAAA,MAAA;AAGtD,MAAA,IAAI,uBAAuB,oBAAsB,EAAA;AAC/C,QAAA,cAAA,CAAe,KAAO,CAAA,CAAC,CAAI,GAAA,mBAAA,GAAsB,WAAW,QAAW,GAAA,CAAA;AACvE,QAAgB,eAAA,CAAA,GAAA,CAAI,KAAK,OAAS,EAAA;AAAA,UAChC,SAAA,EAAW,sBAAsB,MAAS,GAAA,OAAA;AAAA,UAC1C,YAAY,CAAC,MAAA,CAAO,sBAAsB,EAAK,GAAA,YAAA,GAAe,CAAC,CAAC;AAAA,SACjE,CACE,CAAA,IAAA,CAAK,CAAC,EAAE,GAAQ,KAAA;AACf,UAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AACvB,UAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,YAC3B,MAAA,EAAQ,CAAG,EAAA,eAAA,CAAgB,MAAM,CAAA,EAAA,CAAA;AAAA,YACjC,IAAA,EAAM,GAAG,CAAC,CAAA,EAAA;AAAA,WACX,CAAA;AAAA,SACF,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA,OACjB,MAAA;AACL,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AAAA;AAKzB,MAAA,IAAI,KAAM,CAAA,CAAC,CAAM,KAAA,CAAA,KAAM,sBAAsB,qBAAwB,CAAA,EAAA;AACnE,QAAA,cAAA,CAAe,KAAO,CAAA,CAAC,CAAI,GAAA,kBAAA,GAAqB,WAAW,QAAW,GAAA,CAAA;AACtE,QAAgB,eAAA,CAAA,GAAA,CAAI,KAAK,OAAS,EAAA;AAAA,UAChC,SAAA,EAAW,qBAAqB,KAAQ,GAAA,QAAA;AAAA,UACxC,YAAY,CAAC,MAAA,CAAO,qBAAqB,EAAK,GAAA,aAAA,GAAgB,CAAC,CAAC;AAAA,SACjE,CACE,CAAA,IAAA,CAAK,CAAC,EAAE,GAAQ,KAAA;AACf,UAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,MAAA;AACvB,UAAO,MAAA,CAAA,MAAA,CAAO,QAAQ,KAAO,EAAA;AAAA,YAC3B,KAAA,EAAO,CAAG,EAAA,eAAA,CAAgB,KAAK,CAAA,EAAA,CAAA;AAAA,YAC/B,GAAA,EAAK,GAAG,CAAC,CAAA,EAAA;AAAA,WACV,CAAA;AAAA,SACF,CAAA,CACA,KAAM,CAAA,OAAA,CAAQ,KAAK,CAAA;AAAA,OACjB,MAAA;AACL,QAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AAAA;AAGzB,MAAA;AAAA;AAGF,IAAe,cAAA,CAAA,KAAA,GAAQ,CAAC,EAAA,EAAI,EAAE,CAAA;AAE9B,IAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,IAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,IAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,MAAA;AACzB,IAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,MAAA;AAEzB,IAAgC,+BAAA,CAAA;AAAA,MAC9B,IAAA;AAAA,MACA;AAAA,KACD,CAAA;AACD,IAAgC,+BAAA,CAAA;AAAA,MAC9B,IAAA;AAAA,MACA;AAAA,KACD,CAAA;AACD,IAAA,UAAA,CAAW,KAAQ,GAAA,KAAA;AAAA,KAClB,EAAE,CAAA;AACP;AAEO,SAAS,0BAA0B,IAAwB,EAAA;AAChE,EAAA,OAAO,MAAM;AACX,IAAA,MAAM,EAAE,YAAA,EAAc,YAAc,EAAA,cAAA,EAAgB,gBAAmB,GAAA,IAAA;AACvE,IAAA,UAAA,CAAW,MAAM;AACf,MAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,MAAA,IAAI,CAAC,SAAW,EAAA;AAChB,MAAA,MAAM,YAAY,YAAa,CAAA,KAAA;AAC/B,MAAA,IAAI,CAAC,SAAW,EAAA;AAChB,MAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,MAAA,IAAI,CAAC,OAAS,EAAA;AACd,MAAA,MAAM,UAAU,cAAe,CAAA,KAAA;AAC/B,MAAA,IAAI,CAAC,OAAS,EAAA;AAEd,MAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,MAAA,SAAA,CAAU,QAAQ,IAAO,GAAA,OAAA;AACzB,MAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AACvB,MAAA,OAAA,CAAQ,QAAQ,IAAO,GAAA,OAAA;AAAA,OACtB,GAAG,CAAA;AAAA,GACR;AACF;AAEgB,SAAA,kBAAA,CAAmB,MAAY,IAAmB,EAAA;AAChE,EAAM,MAAA,WAAA,GAAc,wBAAyB,CAAA,IAAA,EAAM,IAAI,CAAA;AACvD,EAAM,MAAA,YAAA,GAAe,0BAA0B,IAAI,CAAA;AAEnD,EAAO,OAAA;AAAA,IACL,WAAA;AAAA,IACA;AAAA,GACF;AACF;;ACnIO,MAAM,aAAa,eAAiC,CAAA;AAAA,EACzD,KAAO,EAAA;AAAA,IACL,IAAM,EAAA;AAAA,MACJ,IAAM,EAAA,MAAA;AAAA,MACN,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,IAAM,EAAA,MAAA;AAAA,MACN,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,MAAQ,EAAA;AAAA,MACN,IAAM,EAAA,QAAA;AAAA,MACN,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,MAAQ,EAAA;AAAA,MACN,IAAM,EAAA,MAAA;AAAA,MACN,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,OAAS,EAAA;AAAA,MACP,IAAM,EAAA,QAAA;AAAA,MACN,QAAU,EAAA;AAAA,KACZ;AAAA,IACA,IAAM,EAAA;AAAA,MACJ,IAAM,EAAA,MAAA;AAAA,MACN,QAAU,EAAA;AAAA;AACZ,GACF;AAAA,EACA,KAAA,CAAM,EAAE,IAAM,EAAA,IAAA,EAAM,KAAK,MAAQ,EAAA,MAAA,EAAQ,SAAW,EAAA;AAClD,IAAA,MAAM,oBAAoB,GAAiB,EAAA;AAC3C,IAAM,MAAA,yBAAA,GAAsC,CAAC,GAAQ,KAAA;AACnD,MAAA,IAAI,OAAO,IAAM,EAAA;AACjB,MAAA,IAAI,eAAe,WAAa,EAAA;AAC9B,QAAA,iBAAA,CAAkB,KAAQ,GAAA,GAAA;AAC1B,QAAA,OAAA,CAAQ,GAAG,CAAA;AAAA,OACN,MAAA;AACL,QAAA,iBAAA,CAAkB,KAAQ,GAAA,MAAA;AAAA;AAC5B,KACF;AACA,IAAA,MAAM,eAAe,GAAoB,EAAA;AACzC,IAAA,MAAM,eAAe,GAAoB,EAAA;AACzC,IAAA,MAAM,iBAAiB,GAAoB,EAAA;AAC3C,IAAA,MAAM,iBAAiB,GAAoB,EAAA;AAC3C,IAAA,MAAM,kBAAkB,GAAoB,EAAA;AAC5C,IAAA,MAAM,iBAAiB,GAAoB,EAAA;AAC3C,IAAA,MAAM,UAAa,GAAA,GAAA,CAAe,CAAC,CAAA,EAAG,CAAC,CAAC,CAAA;AACxC,IAAA,MAAM,cAAiB,GAAA,GAAA,CAAe,CAAC,EAAA,EAAI,EAAE,CAAC,CAAA;AAC9C,IAAA,MAAM,WAAW,GAAc,EAAA;AAE/B,IAAA,MAAM,IAAa,GAAA;AAAA,MACjB,cAAA;AAAA,MACA,eAAA;AAAA,MACA,iBAAA;AAAA,MACA,cAAA;AAAA,MACA,cAAA;AAAA,MACA,YAAA;AAAA,MACA,YAAA;AAAA,MACA,UAAA;AAAA,MACA,cAAA;AAAA,MACA;AAAA,KACF;AAEA,IAAA,MAAM,EAAE,YAAc,EAAA,WAAA,EAAgB,GAAA,kBAAA,CAAmB,MAAM,IAAI,CAAA;AACnE,IAAA,MAAM,EAAE,OAAS,EAAA,OAAA,KAAY,eAAgB,CAAA,IAAA,EAAM,KAAK,MAAM,CAAA;AAC9D,IAAM,MAAA;AAAA,MACJ,QAAA;AAAA,MACA,QAAA;AAAA,MACA,SAAA;AAAA,MACA,SAAA;AAAA,MACA,cAAA;AAAA,MACA;AAAA,KACE,GAAA,YAAA,CAAa,IAAM,EAAA,GAAA,EAAK,MAAM,CAAA;AAElC,IAAA,SAAA,CAAU,MAAM;AACd,MAAA,qBAAA,CAAsB,MAAM;AAE1B,QAAA,IAAI,KAAK,QAAU,EAAA,0BAAA,CAA2B,IAAM,EAAA,IAAA,EAAM,KAAK,KAAK,CAAA;AAAA,OACrE,CAAA;AAAA,KACF,CAAA;AAED,IAAA,OAAO,MAAM;AACX,MACE,uBAAA,CAAA;AAAA,QAAC,KAAA;AAAA,QAAA;AAAA,UACC,WAAa,EAAA,CAAC,CAAM,KAAA,CAAA,CAAE,cAAe,EAAA;AAAA,UACrC,UAAY,EAAA,CAAC,CAAM,KAAA,CAAA,CAAE,cAAe,EAAA;AAAA,UACpC,WAAa,EAAA,CAAC,CAAM,KAAA,CAAA,CAAE,cAAe,EAAA;AAAA,UACrC,aAAe,EAAA,WAAA;AAAA,UACf,cAAgB,EAAA;AAAA,SAAA;AAAA,wBAEhB,CAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,IAAK,EAAA,QAAA;AAAA,YACL,WAAU,EAAA,OAAA;AAAA,YACV,eAAgB,EAAA,OAAA;AAAA,YAChB,SAAU,EAAA,MAAA;AAAA,YACV,WAAU,EAAA,iBAAA;AAAA,YACV,KAAM,EAAA,oBAAA;AAAA,YACN,WAAa,EAAA,OAAA;AAAA,YACb,OAAS,EAAA,SAAA;AAAA,YACT,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,GAAK,EAAA;AAAA,WAAA;AAAA,4BAEJ,IAAK,EAAA,EAAA,IAAA,EAAM,MAAO,CAAA,YAAA,CAAa,iBAAiB,CAAG,EAAA,CAAA;AAAA,0BACpD,CAAA;AAAA,YAAC,KAAA;AAAA,YAAA;AAAA,cACC,WAAU,EAAA,OAAA;AAAA,cACV,KAAM,EAAA,cAAA;AAAA,cACN,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB;AAAA,aAAA;AAAA,4BAErD,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,eAAe,OAAQ,CAAA,MAAM,CACjD,EAAA,kBAAA,CAAA,CAAC,QAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,gBAAgB,GAAG,CACrD,CAAA;AAAA,4BACC,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,eAAe,OAAQ,CAAA,QAAQ,CACnD,EAAA,kBAAA,CAAA,CAAC,QAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,kBAAkB,GAAG,CACvD,CAAA;AAAA,4BACC,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,eAAe,OAAQ,CAAA,OAAO,CAClD,EAAA,kBAAA,CAAA,CAAC,QAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,iBAAiB,GAAG,CACtD,CAAA;AAAA,4BACC,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,aAAe,EAAA,cAAA,EAAA,kBAClC,CAAA,CAAA,IAAA,EAAA,EAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,YAAY,GAAG,CACjD;AAAA;AACF,SACF;AAAA,wBACA,CAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YACC,IAAK,EAAA,QAAA;AAAA,YACL,WAAU,EAAA,OAAA;AAAA,YACV,eAAgB,EAAA,OAAA;AAAA,YAChB,SAAU,EAAA,MAAA;AAAA,YACV,WAAU,EAAA,iBAAA;AAAA,YACV,KAAM,EAAA,oBAAA;AAAA,YACN,WAAa,EAAA,OAAA;AAAA,YACb,OAAS,EAAA,SAAA;AAAA,YACT,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,GAAK,EAAA;AAAA,WAAA;AAAA,4BAEJ,IAAK,EAAA,EAAA,IAAA,EAAM,MAAO,CAAA,YAAA,CAAa,iBAAiB,CAAG,EAAA,CAAA;AAAA,0BACpD,CAAA;AAAA,YAAC,KAAA;AAAA,YAAA;AAAA,cACC,WAAU,EAAA,OAAA;AAAA,cACV,KAAM,EAAA,cAAA;AAAA,cACN,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB;AAAA,aAAA;AAAA,4BAErD,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,aAAe,EAAA,cAAA,EAAA,kBAClC,CAAA,CAAA,IAAA,EAAA,EAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,YAAY,GAAG,CACjD;AAAA;AACF,SACF;AAAA,wBACC,CAAA,CAAA,KAAA,EAAA,EAAI,KAAM,EAAA,eAAA,EAAgB,KAAK,eAC9B,EAAA,kBAAA,CAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,WAAU,EAAA,OAAA;AAAA,YACV,KAAM,EAAA,cAAA;AAAA,YACN,gBAAe,EAAA,UAAA;AAAA,YACf,GAAK,EAAA;AAAA,WAAA;AAAA,0BAEJ,CAAA,CAAA,OAAA,EAAA,IAAA,kBACE,CAAA,CAAA,OAAA,EAAA,IAAM,CACT;AAAA,SAEF,kBAAA,CAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,WAAU,EAAA,OAAA;AAAA,YACV,eAAgB,EAAA,OAAA;AAAA,YAChB,mBAAkB,EAAA,MAAA;AAAA,YAClB,WAAU,EAAA,oBAAA;AAAA,YACV,KAAM,EAAA,oBAAA;AAAA,YACN,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,GAAK,EAAA;AAAA,WAAA;AAAA,0BAEJ,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,SAAS,QAAU,EAAA,KAAA,EAAM,YAC7C,EAAA,kBAAA,CAAA,CAAC,QAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,SAAS,GAAG,CAC9C;AAAA,SAEF,kBAAA,CAAA;AAAA,UAAC,KAAA;AAAA,UAAA;AAAA,YACC,WAAU,EAAA,OAAA;AAAA,YACV,eAAgB,EAAA,OAAA;AAAA,YAChB,mBAAkB,EAAA,MAAA;AAAA,YAClB,WAAU,EAAA,oBAAA;AAAA,YACV,KAAM,EAAA,oBAAA;AAAA,YACN,aAAe,EAAA,CAAC,CAAoB,KAAA,CAAA,CAAE,eAAgB,EAAA;AAAA,YACtD,GAAK,EAAA;AAAA,WAAA;AAAA,0BAEJ,CAAA,CAAA,QAAA,EAAA,EAAO,IAAK,EAAA,QAAA,EAAS,SAAS,QAAU,EAAA,KAAA,EAAM,YAC7C,EAAA,kBAAA,CAAA,CAAC,QAAK,IAAM,EAAA,MAAA,CAAO,YAAa,CAAA,SAAS,GAAG,CAC9C;AAAA,2BAED,CAAA,CAAA,OAAA,EAAA,EAAM,KAAK,yBAA2B,EAAA,KAAA,EAAM,YAAW,CAC1D;AAAA,OACF;AAAA,KAEJ;AAAA;AAEJ,CAAC,CAAA;;;;;;;;AC7ND,IAAA,wBAAA,EAAA,cAAA;AAoBO,MAAM,aAAkC,CAAA;AAAA,EAO7C,WACS,CAAA,GAAA,EACA,IACA,EAAA,IAAA,EACA,MACP,EAAA;AAJO,IAAA,IAAA,CAAA,GAAA,GAAA,GAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,IAAA,IAAA,CAAA,MAAA,GAAA,MAAA;AAXJ,IAAA,YAAA,CAAA,IAAA,EAAA,wBAAA,CAAA;AAaH,IAAM,MAAA,GAAA,GAAM,QAAS,CAAA,aAAA,CAAc,KAAK,CAAA;AACxC,IAAA,GAAA,CAAI,SAAY,GAAA,sBAAA;AAEhB,IAAM,MAAA,UAAA,GAAa,QAAS,CAAA,aAAA,CAAc,OAAO,CAAA;AACjD,IAAA,IAAA,CAAK,UAAa,GAAA,UAAA;AAClB,IAAW,UAAA,CAAA,YAAA,CAAa,oBAAoB,MAAM,CAAA;AAClD,IAAW,UAAA,CAAA,SAAA,CAAU,IAAI,aAAa,CAAA;AACtC,IAAK,IAAA,CAAA,OAAA,GAAU,WAAW,IAAI,CAAA;AAE9B,IAAM,MAAA,GAAA,GAAM,UAAU,UAAY,EAAA;AAAA,MAChC,IAAA;AAAA,MACA,GAAA;AAAA,MACA,MAAA;AAAA,MACA,MAAQ,EAAA,GAAA,CAAI,GAAI,CAAA,gBAAA,CAAiB,GAAG,CAAA;AAAA,MACpC,OAAA,EAAS,CAAC,GAAiB,KAAA;AACzB,QAAA,GAAA,CAAI,YAAY,UAAU,CAAA;AAAA,OAC5B;AAAA,MACA,MAAM,IAAK,CAAA;AAAA,KACZ,CAAA;AACD,IAAA,GAAA,CAAI,MAAM,GAAG,CAAA;AACb,IAAA,IAAA,CAAK,GAAM,GAAA,GAAA;AAEX,IAAA,IAAA,CAAK,GAAM,GAAA,GAAA;AAAA;AACb,EAEA,OAAO,IAAY,EAAA;AACjB,IAAA,IAAI,IAAK,CAAA,IAAA,KAAS,IAAK,CAAA,IAAA,CAAK,MAAa,OAAA,KAAA;AAEzC,IAAI,IAAA,IAAA,CAAK,UAAW,CAAA,IAAA,CAAK,IAAI,CAAA,IAAK,KAAK,OAAQ,CAAA,EAAA,CAAG,IAAK,CAAA,IAAA,CAAK,OAAO,CAAA;AACjE,MAAO,OAAA,KAAA;AAET,IAAA,IAAA,CAAK,IAAO,GAAA,IAAA;AACZ,IAAA,IAAA,CAAK,QAAQ,KAAQ,GAAA,IAAA;AAErB,IAAO,OAAA,IAAA;AAAA;AACT,EA6CA,UAAU,CAAU,EAAA;AAClB,IAAI,IAAA,CAAA,CAAE,SAAS,MAAU,IAAA,CAAA,CAAE,KAAK,UAAW,CAAA,MAAM,GAAU,OAAA,IAAA;AAE3D,IAAA,IAAI,CAAE,CAAA,IAAA,KAAS,WAAe,IAAA,CAAA,CAAE,SAAS,aAAe,EAAA;AACtD,MAAI,IAAA,CAAA,CAAE,kBAAkB,OAAW,IAAA,CAAA,CAAE,OAAO,OAAQ,CAAA,QAAQ,GAAU,OAAA,IAAA;AAEtE,MAAA,MAAM,SAAS,CAAE,CAAA,MAAA;AACjB,MACE,IAAA,MAAA,YAAkB,gBACjB,MAAO,CAAA,OAAA,CAAQ,IAAI,CAAK,IAAA,MAAA,CAAO,OAAQ,CAAA,IAAI,CAC5C,CAAA,EAAA;AACA,QAAA,MAAM,KAAQ,GAAA,CAAA;AACd,QAAO,OAAA,eAAA,CAAA,IAAA,EAAK,0CAAL,IAAkB,CAAA,IAAA,EAAA,KAAA,CAAA;AAAA;AAC3B;AAGF,IAAO,OAAA,KAAA;AAAA;AACT,EAEA,eAAe,QAA8B,EAAA;AAC3C,IAAA,IAAI,CAAC,IAAK,CAAA,GAAA,IAAO,CAAC,IAAA,CAAK,YAAmB,OAAA,IAAA;AAE1C,IAAK,IAAA,QAAA,CAAS,IAAqB,KAAA,WAAA,EAAoB,OAAA,KAAA;AAEvD,IAAA,IAAI,IAAK,CAAA,UAAA,KAAe,QAAS,CAAA,MAAA,IAAU,SAAS,IAAS,KAAA,YAAA;AAC3D,MAAO,OAAA,IAAA;AAET,IAAA,IAAI,KAAK,UAAW,CAAA,QAAA,CAAS,QAAS,CAAA,MAAM,GAAU,OAAA,KAAA;AAEtD,IAAO,OAAA,IAAA;AAAA;AACT,EAEA,OAAU,GAAA;AACR,IAAA,IAAA,CAAK,IAAI,OAAQ,EAAA;AACjB,IAAA,IAAA,CAAK,IAAI,MAAO,EAAA;AAChB,IAAA,IAAA,CAAK,WAAW,MAAO,EAAA;AAAA;AAE3B;AAlIO,wBAAA,GAAA,IAAA,OAAA,EAAA;AAkDL,cAAA,GAAY,SAAC,KAAqB,EAAA;AAChC,EAAA,MAAM,OAAO,IAAK,CAAA,IAAA;AAClB,EAAI,IAAA,CAAC,IAAK,CAAA,QAAA,EAAiB,OAAA,KAAA;AAE3B,EAAM,MAAA,EAAE,KAAO,EAAA,QAAA,EAAa,GAAA,IAAA;AAC5B,EAAM,MAAA,GAAA,GAAM,IAAK,CAAA,WAAA,CAAY,EAAE,IAAA,EAAM,MAAM,OAAS,EAAA,GAAA,EAAK,KAAM,CAAA,OAAA,EAAS,CAAA;AAExE,EAAI,IAAA,CAAC,KAAY,OAAA,KAAA;AAEjB,EAAA,MAAM,IAAO,GAAA,KAAA,CAAM,GAAI,CAAA,OAAA,CAAQ,IAAI,MAAM,CAAA;AACzC,EAAA,MAAM,IAAO,GAAA,UAAA;AAAA,IACX,CAACF,UACCA,KAAK,CAAA,IAAA,CAAK,SAAS,YAAgBA,IAAAA,KAAAA,CAAK,KAAK,IAAS,KAAA;AAAA,IACxD,IAAI,CAAA;AAEN,EAAI,IAAA,CAAC,MAAa,OAAA,KAAA;AAGlB,EAAI,IAAA,KAAA,CAAM,qBAAqB,aAAe,EAAA;AAC5C,IAAA,MAAM,WAAc,GAAA,UAAA;AAAA,MAClB,CAACA,UACCA,KAAK,CAAA,IAAA,CAAK,SAAS,YAAgBA,IAAAA,KAAAA,CAAK,KAAK,IAAS,KAAA;AAAA,KAC1D,CAAE,KAAM,CAAA,SAAA,CAAU,KAAK,CAAA;AACvB,IAAA,IAAA,CAAI,WAAa,IAAA,IAAA,GAAA,MAAA,GAAA,WAAA,CAAA,IAAA,MAAS,IAAK,CAAA,IAAA,EAAa,OAAA,KAAA;AAAA;AAG9C,EAAM,MAAA,EAAE,MAAS,GAAA,IAAA;AAEjB,EAAA,MAAM,YAAY,aAAc,CAAA,MAAA,CAAO,KAAM,CAAA,GAAA,EAAK,OAAO,CAAC,CAAA;AAC1D,EAAA,IAAI,KAAM,CAAA,SAAA,CAAU,EAAG,CAAA,SAAS,GAAU,OAAA,KAAA;AAE1C,EAAI,IAAA,KAAA,CAAM,qBAAqB,aAAe,EAAA;AAC5C,IAAA,UAAA,CAAW,MAAM;AACf,MAAA,QAAA,CAAS,MAAM,EAAG,CAAA,YAAA,CAAa,SAAS,CAAA,CAAE,gBAAgB,CAAA;AAAA,OACzD,EAAE,CAAA;AAAA,GACA,MAAA;AACL,IAAA,qBAAA,CAAsB,MAAM;AAC1B,MAAA,QAAA,CAAS,MAAM,EAAG,CAAA,YAAA,CAAa,SAAS,CAAA,CAAE,gBAAgB,CAAA;AAAA,KAC3D,CAAA;AAAA;AAEH,EAAO,OAAA,IAAA;AACT,CAAA;AAyCK,MAAM,cAAiB,GAAA,KAAA;AAAA,EAC5B,WAAY,CAAA,IAAA;AAAA,EACZ,CAAC,GAA6B,KAAA;AAC5B,IAAO,OAAA,CAAC,WAAa,EAAA,IAAA,EAAM,MAAW,KAAA;AACpC,MAAA,OAAO,IAAI,aAAA,CAAc,GAAK,EAAA,WAAA,EAAa,MAAM,MAAM,CAAA;AAAA,KACzD;AAAA;AAEJ;AAEA,QAAA,CAAS,cAAgB,EAAA;AAAA,EACvB,WAAa,EAAA,uBAAA;AAAA,EACb,KAAO,EAAA;AACT,CAAC,CAAA;;AC5JY,MAAA,UAAA,GAA+B,CAAC,gBAAA,EAAkB,cAAc;;;;"}