{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\n\nimport { dropCursor } from '@milkdown/prose/dropcursor'\nimport { gapCursor } from '@milkdown/prose/gapcursor'\nimport { $ctx, $prose } from '@milkdown/utils'\n\nfunction withMeta<T extends MilkdownPlugin>(\n  plugin: T,\n  meta: Partial<Meta> & Pick<Meta, 'displayName'>\n): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/plugin-cursor',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n\n/// @internal\nexport interface DropCursorOptions {\n  /**\n    The color of the cursor. Defaults to `black`.\n   */\n  color?: string | false\n  /**\n    The precise width of the cursor in pixels. Defaults to 1.\n   */\n  width?: number\n  /**\n    A CSS class name to add to the cursor element.\n   */\n  class?: string\n}\n\n/// A slice that contains [options for drop cursor](https://github.com/ProseMirror/prosemirror-dropcursor#documentation).\nexport const dropCursorConfig = $ctx<DropCursorOptions, 'dropCursorConfig'>(\n  {},\n  'dropCursorConfig'\n)\n\nwithMeta(dropCursorConfig, {\n  displayName: 'Ctx<dropCursor>',\n})\n\n/// This plugin wraps [drop cursor](https://github.com/ProseMirror/prosemirror-dropcursor).\nexport const dropCursorPlugin = $prose((ctx) =>\n  dropCursor(ctx.get(dropCursorConfig.key))\n)\n\nwithMeta(dropCursorPlugin, {\n  displayName: 'Prose<dropCursor>',\n})\n\n/// This plugin wraps [gap cursor](https://github.com/ProseMirror/prosemirror-gapcursor).\nexport const gapCursorPlugin = $prose(() => gapCursor())\n\nwithMeta(gapCursorPlugin, {\n  displayName: 'Prose<gapCursor>',\n})\n\n/// All plugins exported by this package.\nexport const cursor: MilkdownPlugin[] = [\n  dropCursorConfig,\n  dropCursorPlugin,\n  gapCursorPlugin,\n]\n"],"names":[],"mappings":";;;AAMA,SAAS,SACP,QACA,MACG;AACH,SAAO,OAAO,QAAQ;AAAA,IACpB,MAAM;AAAA,MACJ,SAAS;AAAA,MACT,GAAG;AAAA,IAAA;AAAA,EACL,CACD;AAEM,SAAA;AACT;AAmBO,MAAM,mBAAmB;AAAA,EAC9B,CAAC;AAAA,EACD;AACF;AAEA,SAAS,kBAAkB;AAAA,EACzB,aAAa;AACf,CAAC;AAGM,MAAM,mBAAmB;AAAA,EAAO,CAAC,QACtC,WAAW,IAAI,IAAI,iBAAiB,GAAG,CAAC;AAC1C;AAEA,SAAS,kBAAkB;AAAA,EACzB,aAAa;AACf,CAAC;AAGM,MAAM,kBAAkB,OAAO,MAAM,UAAW,CAAA;AAEvD,SAAS,iBAAiB;AAAA,EACxB,aAAa;AACf,CAAC;AAGM,MAAM,SAA2B;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AACF;"}